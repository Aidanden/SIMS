# โ๏ธ ูุฌุจ ุชุดุบูู ูุฐู ุงูุฃูุงูุฑ ุฃููุงู!

## โ ุชู ุฅุตูุงุญ:
- โ ูุดููุฉ TypeScript ูู Controller
- โ ูุดููุฉ ุชุฑุชูุจ ุงููุณุงุฑุงุช ูู Routes

## โ๏ธ ุงููุดููุฉ ุงููุชุจููุฉ:
ุงูุฎุงุฏู ูุง ูุนูู ุจุณุจุจ ุฃู Prisma Client ูู ูุชู ุชุญุฏูุซู ุจุนุฏ ุชุนุฏูู Schema.

---

## โ ุงูุญู (ุดุบู ูุฐู ุงูุฃูุงูุฑ ุจุงูุชุฑุชูุจ):

### ุงูุฎุทูุฉ 1: ุชูููุฏ Prisma Client
ุงูุชุญ Terminal ูู ูุฌูุฏ `server` ูุดุบู:

```bash
cd server
npx prisma generate
```

**ูุงุฐุง ุณูุญุฏุซุ**
- ุณูุชู ุชุญุฏูุซ Prisma Client ููุชุนุฑู ุนูู ุงูุญููู ุงูุฌุฏูุฏุฉ
- ุณูุชู ุฅูุดุงุก Types ุฌุฏูุฏุฉ ููู TypeScript
- ุงูุฃุฎุทุงุก ูู `SalesService.ts` ู `SalePaymentService.ts` ุณุชุฎุชูู

---

### ุงูุฎุทูุฉ 2: ุชุดุบูู Migration (ูุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช)
```bash
npx prisma migrate dev --name add_credit_sales_and_payments
```

**ูุงุฐุง ุณูุญุฏุซุ**
- ุณูุชู ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ ูุฌุฏูู `Sale`:
  - `paidAmount` (ุงููุจูุบ ุงููุฏููุน)
  - `remainingAmount` (ุงููุจูุบ ุงููุชุจูู)
  - `isFullyPaid` (ูู ุชู ุงูุณุฏุงุฏ ุจุงููุงูู)
  
- ุณูุชู ุฅูุดุงุก ุฌุฏูู ุฌุฏูุฏ `SalePayment` ูุฅูุตุงูุงุช ุงููุจุถ

- ุณูุชู ุชุญุฏูุซ Prisma Client ุชููุงุฆูุงู

---

### ุงูุฎุทูุฉ 3: ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ (ุงุฎุชูุงุฑู)
ุฅุฐุง ูุงู ูุฏูู ููุงุชูุฑ ูุจูุนุงุช ููุฌูุฏุฉ ุจุงููุนูุ ุดุบู:

```bash
npx prisma studio
```

ุซู ููุฐ ูุฐุง SQL ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```sql
-- ุชุญุฏูุซ ุงูููุงุชูุฑ ุงูููุฏูุฉ ุงูููุฌูุฏุฉ
UPDATE "Sale"
SET 
  "paidAmount" = "total",
  "remainingAmount" = 0,
  "isFullyPaid" = true
WHERE "saleType" = 'CASH'
  AND "paidAmount" IS NULL;

-- ุชุญุฏูุซ ุงูููุงุชูุฑ ุงูุขุฌูุฉ ุงูููุฌูุฏุฉ
UPDATE "Sale"
SET 
  "paidAmount" = 0,
  "remainingAmount" = "total",
  "isFullyPaid" = false
WHERE "saleType" = 'CREDIT'
  AND "paidAmount" IS NULL;
```

ุฃู ุงุณุชุฎุฏู ุงูููู ุงูุฌุงูุฒ:
```bash
npx prisma db execute --file ./prisma/update_existing_sales.sql
```

---

### ุงูุฎุทูุฉ 4: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู
```bash
npm run dev
```

---

## ๐ฏ ุจุนุฏ ุชุดุบูู ุงูุฃูุงูุฑ:

### 1. ุชุญูู ูู ูุฌุงุญ ุงูุนูููุฉ:
ูุฌุจ ุฃู ุชุฑู ูู Terminal:
```
โ Generated Prisma Client
โ Migration applied successfully
```

### 2. ุงูุชุญ ุงููุชุตูุญ:
```
http://localhost:3030/credit-sales
```

### 3. ุฌุฑุจ ุงููุธุงู:
- ุฃูุดุฆ ูุงุชูุฑุฉ ุขุฌูุฉ ุฌุฏูุฏุฉ
- ุฃุถู ุฏูุนุฉ ูููุงุชูุฑุฉ
- ุดุงูุฏ ุงูุฅุญุตุงุฆูุงุช

---

## ๐ ููุงุญุธุงุช ูููุฉ:

1. **ูุง ุชูุณู Prisma Generate**: ูุฐุง ูู ุงูุฃูู!
2. **Migration ูุฑุฉ ูุงุญุฏุฉ ููุท**: ูุง ุชุดุบูู ุฃูุซุฑ ูู ูุฑุฉ
3. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ุฅุฐุง ููุช ูู Productionุ ุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฃููุงู

---

## ๐ ุฅุฐุง ูุงุฌูุช ูุดุงูู:

### ุฎุทุฃ "paidAmount does not exist"
```bash
npx prisma generate
```

### ุฎุทุฃ "Migration failed"
```bash
npx prisma migrate reset
npx prisma migrate dev
```

### ุงูุฎุงุฏู ูุง ูุนูู
```bash
# ุงุญุฐู node_modules/.prisma
rm -rf node_modules/.prisma
npx prisma generate
npm run dev
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู:

- [ ] ุดุบูุช `npx prisma generate`
- [ ] ุดุบูุช `npx prisma migrate dev`
- [ ] ุงูุฎุงุฏู ูุนูู ุจุฏูู ุฃุฎุทุงุก
- [ ] ูุชุญุช ุตูุญุฉ ุงููุจูุนุงุช ุงูุขุฌูุฉ
- [ ] ุฌุฑุจุช ุฅุถุงูุฉ ุฏูุนุฉ

---

**ุจุนุฏ ุชุดุบูู ูุฐู ุงูุฃูุงูุฑุ ุงููุธุงู ุณูุนูู ุจุดูู ูุงูู! ๐**
