# ๐ ุชุญุณูู ูุนูููุงุช ุงูุชุนุฏูู - ุนุฑุถ ุงูุฃุณุนุงุฑ ูุงูุฃูุชุงุฑ

## ๐ฏ ุงููุฏู ูู ุงูุชุญุฏูุซ

ุชุญุณูู modal ุงูุชุนุฏูู ูุนุฑุถ ูุนูููุงุช ุชูุตูููุฉ ุนู ุงูุฃุตูุงูุ ุฎุงุตุฉู:
- ๐ **ุนุฏุฏ ุงูุฃูุชุงุฑ** ุฅุฐุง ูุงู ุงูุตูู ููุจุงุน ุจุงูุตูุฏูู
- ๐ฐ **ุงูุณุนุฑ ููู ูุชุฑ** ุจุงูุฅุถุงูุฉ ุฅูู ุงูุณุนุฑ ุงูููู
- ๐ฆ **ุงููุญุฏุฉ** (ุตูุฏููุ ูุชุฑุ ุฅูุฎ)
- ๐ข **ุญุณุงุจุงุช ุชููุงุฆูุฉ** ุชุชุญุฏุซ ูุน ูู ุชุนุฏูู

---

## ๐ ุงููุนูููุงุช ุงููุนุฑูุถุฉ ุงูุขู

### ูุจู ุงูุชุญุฏูุซ โ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุตูู: [ุจูุงุท ABC-001]                  โ
โ ุงููููุฉ: [50]                            โ
โ ุงูุณุนุฑ: [15.50]                          โ
โ                                          โ
โ ุงููุฌููุน: 775.00 ุฏ.ู                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุจุนุฏ ุงูุชุญุฏูุซ โ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุตูู: [ุจูุงุท ABC-001]                  โ
โ                                          โ
โ ุงููููุฉ (ุตูุฏูู): [50]                   โ
โ ๐ 125.00 ูุชุฑ                           โ
โ                                          โ
โ ุงูุณุนุฑ/ุตูุฏูู: [15.50]                   โ
โ ๐ฐ 6.20 ุฏ.ู/ูุชุฑ                         โ
โ                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงููุญุฏุฉ: ุตูุฏูู                          โ
โ ูุชุฑ/ุตูุฏูู: 2.50                        โ
โ                                          โ
โ ุงููุฌููุน: 775.00 ุฏ.ู                    โ
โ ุฅุฌูุงูู ุงูุฃูุชุงุฑ: 125.00 ู               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ข ุงูุญุณุงุจุงุช ุงูุชููุงุฆูุฉ

### 1. **ุฅุฌูุงูู ุงูุฃูุชุงุฑ**
```typescript
const totalUnits = line.qty * product.unitsPerBox
```

**ูุซุงู:**
```
ุงููููุฉ: 50 ุตูุฏูู
ูุชุฑ/ุตูุฏูู: 2.50
ุฅุฌูุงูู ุงูุฃูุชุงุฑ = 50 ร 2.50 = 125.00 ูุชุฑ
```

### 2. **ุงูุณุนุฑ ููู ูุชุฑ**
```typescript
const pricePerUnit = line.unitPrice / product.unitsPerBox
```

**ูุซุงู:**
```
ุงูุณุนุฑ/ุตูุฏูู: 15.50 ุฏ.ู
ูุชุฑ/ุตูุฏูู: 2.50
ุงูุณุนุฑ/ูุชุฑ = 15.50 รท 2.50 = 6.20 ุฏ.ู/ูุชุฑ
```

### 3. **ุงููุฌููุน ุงูุฅุฌูุงูู**
```typescript
const subtotal = line.qty * line.unitPrice
```

**ูุซุงู:**
```
ุงููููุฉ: 50 ุตูุฏูู
ุงูุณุนุฑ/ุตูุฏูู: 15.50 ุฏ.ู
ุงููุฌููุน = 50 ร 15.50 = 775.00 ุฏ.ู
```

---

## ๐จ ุงูุชุตููู ุงูุฌุฏูุฏ

### 1. **ุจุทุงูุฉ ุงูุตูู ุงููุญุณููุฉ**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   [ุงุณู ุงูุตูู]                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโข
โ ุงููููุฉ (ุตูุฏูู)  โ  ุงูุณุนุฑ/ุตูุฏูู  โ  [๐๏ธ]   โ
โ      [50]         โ     [15.50]     โ          โ
โ   ๐ 125.00 ูุชุฑ   โ  ๐ฐ 6.20 ุฏ.ู/ู  โ          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโข
โ ุงููุญุฏุฉ: ุตูุฏูู    โ  ุงููุฌููุน: 775.00 ุฏ.ู     โ
โ ูุชุฑ/ุตูุฏูู: 2.50  โ  ุฅุฌูุงูู ุงูุฃูุชุงุฑ: 125 ู   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 2. **ุงูุฃููุงู ูุงูุฑููุฒ**

| ุงูุนูุตุฑ | ุงูููู | ุงูุฑูุฒ |
|--------|-------|-------|
| ุนุฏุฏ ุงูุฃูุชุงุฑ | ุฃุฒุฑู | ๐ |
| ุงูุณุนุฑ ููู ูุชุฑ | ุฃุฎุถุฑ | ๐ฐ |
| ุงููุฌููุน ุงูุฅุฌูุงูู | ุฃุฒุฑู ุบุงูู | - |
| ูุนูููุงุช ุงููุญุฏุฉ | ุฑูุงุฏู | - |

### 3. **ุชุฃุซูุฑุงุช ุจุตุฑูุฉ**

- โจ **Hover Effect:** ุงูุจุทุงูุฉ ุชุชุญูู ูููู ุจุฑุชูุงูู ุนูุฏ ุงูุชูุฑูุฑ
- ๐จ **Gradient Background:** ุฎูููุฉ ูุชุฏุฑุฌุฉ ูู ุงูุฃุฒุฑู ููุฃุฎุถุฑ ูููุนูููุงุช ุงูุชูุตูููุฉ
- ๐ **Shadow:** ุธู ุฎููู ููุจุทุงูุงุช
- ๐ฒ **Border:** ุญุฏูุฏ ุจุณูู 2px

---

## ๐ป ุงูููุฏ ุงูุชููู

### 1. **ุญุณุงุจ ุงูููู**

```typescript
// ูู component ุงูุชุนุฏูู
{editLines.map((line, index) => {
  // ุงูุนุซูุฑ ุนูู ุงูุตูู
  const product = productsData?.data?.products?.find(
    p => p.id === line.productId
  );
  
  // ุญุณุงุจ ุงูููู
  const unitsPerBox = product?.unitsPerBox 
    ? Number(product.unitsPerBox) 
    : null;
    
  const totalUnits = unitsPerBox && line.qty 
    ? line.qty * unitsPerBox 
    : null;
    
  const pricePerUnit = unitsPerBox && line.unitPrice 
    ? line.unitPrice / unitsPerBox 
    : null;
    
  const subtotal = line.qty * line.unitPrice;
  
  return (
    // ... JSX ููุจุทุงูุฉ
  );
})}
```

### 2. **ุนุฑุถ ุนุฏุฏ ุงูุฃูุชุงุฑ**

```tsx
{/* ุชุญุช ุญูู ุงููููุฉ */}
{totalUnits && (
  <p className="text-xs text-blue-600 mt-0.5">
    ๐ {formatArabicNumber(totalUnits.toFixed(2))} ูุชุฑ
  </p>
)}
```

### 3. **ุนุฑุถ ุงูุณุนุฑ ููู ูุชุฑ**

```tsx
{/* ุชุญุช ุญูู ุงูุณุนุฑ */}
{pricePerUnit && (
  <p className="text-xs text-green-600 mt-0.5">
    ๐ฐ {formatArabicCurrency(pricePerUnit)}/ูุชุฑ
  </p>
)}
```

### 4. **ูุณู ุงููุนูููุงุช ุงูุชูุตูููุฉ**

```tsx
{/* ูุนูููุงุช ุชูุตูููุฉ */}
<div className="mt-3 pt-3 border-t border-gray-200 bg-gradient-to-r from-blue-50 to-green-50 p-2 rounded">
  <div className="grid grid-cols-2 gap-2 text-xs">
    {/* ุงูุนููุฏ ุงูุฃูุณุฑ */}
    <div className="space-y-1">
      {product?.unit && (
        <p className="text-gray-600">
          <span className="font-medium">ุงููุญุฏุฉ:</span> {product.unit}
        </p>
      )}
      {unitsPerBox && (
        <p className="text-gray-600">
          <span className="font-medium">ูุชุฑ/ุตูุฏูู:</span>{' '}
          {formatArabicNumber(unitsPerBox.toFixed(2))}
        </p>
      )}
    </div>
    
    {/* ุงูุนููุฏ ุงูุฃููู */}
    <div className="space-y-1 text-left">
      <p className="text-lg font-bold text-blue-700">
        ุงููุฌููุน: {formatArabicCurrency(subtotal)}
      </p>
      {totalUnits && (
        <p className="text-gray-600">
          <span className="font-medium">ุฅุฌูุงูู ุงูุฃูุชุงุฑ:</span>{' '}
          {formatArabicNumber(totalUnits.toFixed(2))} ู
        </p>
      )}
    </div>
  </div>
</div>
```

---

## ๐ ุงูุชุญุฏูุซ ุงูุชููุงุฆู

### ุนูุฏ ุชุบููุฑ ุงููููุฉ:

```
ุงููููุฉ ุงููุฏููุฉ: 50 ุตูุฏูู
ุงููููุฉ ุงูุฌุฏูุฏุฉ: 75 ุตูุฏูู

ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ:
โโ ุฅุฌูุงูู ุงูุฃูุชุงุฑ: 125 ูุชุฑ โ 187.5 ูุชุฑ
โโ ุงููุฌููุน: 775.00 ุฏ.ู โ 1,162.50 ุฏ.ู
โโ ุงููุฌููุน ุงูููู ูููุงุชูุฑุฉ: ูุชุญุฏุซ ุชููุงุฆูุงู
```

### ุนูุฏ ุชุบููุฑ ุงูุณุนุฑ:

```
ุงูุณุนุฑ ุงููุฏูู: 15.50 ุฏ.ู/ุตูุฏูู
ุงูุณุนุฑ ุงูุฌุฏูุฏ: 18.00 ุฏ.ู/ุตูุฏูู

ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ:
โโ ุงูุณุนุฑ/ูุชุฑ: 6.20 ุฏ.ู โ 7.20 ุฏ.ู
โโ ุงููุฌููุน: 775.00 ุฏ.ู โ 900.00 ุฏ.ู
โโ ุงููุฌููุน ุงูููู ูููุงุชูุฑุฉ: ูุชุญุฏุซ ุชููุงุฆูุงู
```

### ุนูุฏ ุงุฎุชูุงุฑ ุตูู ุฌุฏูุฏ:

```
ุชุญุฏูุซุงุช ููุฑูุฉ:
โโ ุนุฑุถ ุงููุญุฏุฉ (ุตูุฏููุ ูุชุฑุ ุฅูุฎ)
โโ ุนุฑุถ ูุชุฑ/ุตูุฏูู
โโ ุญุณุงุจ ุฅุฌูุงูู ุงูุฃูุชุงุฑ
โโ ุญุณุงุจ ุงูุณุนุฑ/ูุชุฑ
โโ ุญุณุงุจ ุงููุฌููุน
```

---

## ๐ฑ ุงูุชูุงูู ูุน ุฌููุน ุงูุฃุฌูุฒุฉ

### Desktop (1920ร1080)
- โ ุนุฑุถ ูุงูู ูุฌููุน ุงููุนูููุงุช
- โ ุชุฎุทูุท ูุฑูุญ ููุงุณุน

### Laptop (1366ร768)
- โ ุนุฑุถ ููุงุณุจ ูุน scroll
- โ ุฌููุน ุงููุนูููุงุช ูุงุถุญุฉ

### Tablet (768ร1024)
- โ ุชุฎุทูุท ูุชููู ูุน ุงูุนุฑุถ
- โ ุงููุนูููุงุช ููุธูุฉ

### Mobile (375ร667)
- โ ุนุฑุถ ุนููุฏู ููุญููู
- โ ุณูููุฉ ุงูุชูุฑูุฑ

---

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### 1. **ุตูู ุจุงูุตูุฏูู ูุน ุฃูุชุงุฑ**

**ุงูุจูุงูุงุช:**
```json
{
  "name": "ุจูุงุท ABC",
  "unit": "ุตูุฏูู",
  "unitsPerBox": 2.50
}
```

**ุงูุนุฑุถ:**
```
ุงููููุฉ (ุตูุฏูู): 50
๐ 125.00 ูุชุฑ

ุงูุณุนุฑ/ุตูุฏูู: 15.50 ุฏ.ู
๐ฐ 6.20 ุฏ.ู/ูุชุฑ

ุงููุญุฏุฉ: ุตูุฏูู
ูุชุฑ/ุตูุฏูู: 2.50
ุงููุฌููุน: 775.00 ุฏ.ู
ุฅุฌูุงูู ุงูุฃูุชุงุฑ: 125.00 ู
```

### 2. **ุตูู ุจุฏูู ุฃูุชุงุฑ (ูุชุฑุ ููุณุ ุฅูุฎ)**

**ุงูุจูุงูุงุช:**
```json
{
  "name": "ุฅุณููุช",
  "unit": "ููุณ",
  "unitsPerBox": null
}
```

**ุงูุนุฑุถ:**
```
ุงููููุฉ: 100
ุงูุณุนุฑ: 5.50 ุฏ.ู

ุงููุญุฏุฉ: ููุณ
ุงููุฌููุน: 550.00 ุฏ.ู
```

---

## โ ุงูููุงุฆุฏ ุงูุฑุฆูุณูุฉ

### ูููุณุชุฎุฏููู:
1. ๐ฏ **ูุนูููุงุช ุดุงููุฉ** - ูู ูุง ูุญุชุงุฌู ุงููุณุชุฎุฏู ูู ููุงู ูุงุญุฏ
2. ๐งฎ **ุญุณุงุจุงุช ููุฑูุฉ** - ูุง ุญุงุฌุฉ ูุขูุฉ ุญุงุณุจุฉ
3. ๐ **ุดูุงููุฉ ูุงููุฉ** - ุฑุคูุฉ ูุงุถุญุฉ ููุฃุณุนุงุฑ ูุงููููุงุช
4. ๐ **ุณุฑุนุฉ ุฃุนูู** - ูุฑุงุฑุงุช ุฃุณุฑุน ูุน ูุนูููุงุช ุฃูุซุฑ

### ูููุธุงู:
1. โ **ุฏูุฉ ุฃุนูู** - ุชูููู ุงูุฃุฎุทุงุก ุงูุญุณุงุจูุฉ
2. ๐ **ุชุญุฏูุซ ุชููุงุฆู** - ุงูุญุณุงุจุงุช ุชุชู ููุฑุงู
3. ๐ผ **ุงุญุชุฑุงููุฉ** - ูุงุฌูุฉ ุฃูุซุฑ ุงุญุชุฑุงููุฉ
4. ๐ **ุชุญุณูู UX** - ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู

---

## ๐งช ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุจูุน ุจูุงุท

```
ุงูุตูู: ุจูุงุท ุณูุฑุงููู ABC-001
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ุงููููุฉ: 50 ุตูุฏูู
ูุชุฑ/ุตูุฏูู: 2.50 ูุชุฑ
ุฅุฌูุงูู ุงูุฃูุชุงุฑ: 125.00 ูุชุฑ

ุงูุณุนุฑ: 15.50 ุฏ.ู/ุตูุฏูู
ุงูุณุนุฑ/ูุชุฑ: 6.20 ุฏ.ู

ุงููุฌููุน: 775.00 ุฏ.ู
```

**ุงูุญุณุงุจุงุช:**
```
ุฅุฌูุงูู ุงูุฃูุชุงุฑ = 50 ร 2.50 = 125.00 ูุชุฑ
ุงูุณุนุฑ/ูุชุฑ = 15.50 รท 2.50 = 6.20 ุฏ.ู
ุงููุฌููุน = 50 ร 15.50 = 775.00 ุฏ.ู
```

### ูุซุงู 2: ุชุนุฏูู ุงููููุฉ

```
ุงููููุฉ ุงููุฏููุฉ: 50 ุตูุฏูู
ุงููููุฉ ุงูุฌุฏูุฏุฉ: 60 ุตูุฏูู (+10)

ุงูุชุญุฏูุซุงุช:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ุฅุฌูุงูู ุงูุฃูุชุงุฑ:
  125.00 ูุชุฑ โ 150.00 ูุชุฑ (+25.00)

ุงููุฌููุน:
  775.00 ุฏ.ู โ 930.00 ุฏ.ู (+155.00)

ุงููุฌููุน ุงูููู:
  1,200.00 ุฏ.ู โ 1,355.00 ุฏ.ู (+155.00)
```

### ูุซุงู 3: ุชุนุฏูู ุงูุณุนุฑ

```
ุงูุณุนุฑ ุงููุฏูู: 15.50 ุฏ.ู/ุตูุฏูู
ุงูุณุนุฑ ุงูุฌุฏูุฏ: 17.00 ุฏ.ู/ุตูุฏูู (+1.50)

ุงูุชุญุฏูุซุงุช:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ุงูุณุนุฑ/ูุชุฑ:
  6.20 ุฏ.ู โ 6.80 ุฏ.ู (+0.60)

ุงููุฌููุน:
  775.00 ุฏ.ู โ 850.00 ุฏ.ู (+75.00)

ุงููุฌููุน ุงูููู:
  1,200.00 ุฏ.ู โ 1,275.00 ุฏ.ู (+75.00)
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

```
client/src/app/accountant/page.tsx   [โ ูุญุฏูุซ]
client/src/app/sales/page.tsx        [โ ูุญุฏูุซ]
INVOICE_EDIT_DETAILED_INFO.md        [โ ุฌุฏูุฏ - ูุฐุง ุงูููู]
```

---

## ๐ ุงูููุงุท ุงููููุฉ

### 1. **Null Safety**
```typescript
// ุงูุชุญูู ูู ูุฌูุฏ ุงูููู ูุจู ุงูุญุณุงุจ
const unitsPerBox = product?.unitsPerBox 
  ? Number(product.unitsPerBox) 
  : null;

// ุนุฑุถ ุงููุนูููุงุช ููุท ุฅุฐุง ูุงูุช ููุฌูุฏุฉ
{totalUnits && (
  <p>๐ {formatArabicNumber(totalUnits.toFixed(2))} ูุชุฑ</p>
)}
```

### 2. **ุชูุณูู ุงูุฃุฑูุงู**
```typescript
// ุงุณุชุฎุฏุงู formatArabicNumber ููุฃุฑูุงู
formatArabicNumber(totalUnits.toFixed(2))

// ุงุณุชุฎุฏุงู formatArabicCurrency ููุนููุฉ
formatArabicCurrency(pricePerUnit)
```

### 3. **ุงูุฃุฏุงุก**
- โ ุงูุญุณุงุจุงุช ุชุชู ูู ุงูู render (ุณุฑูุนุฉ ุฌุฏุงู)
- โ ูุง ุงุณุชุฏุนุงุกุงุช API ุฅุถุงููุฉ
- โ ุงูุจูุงูุงุช ูุชููุฑุฉ ูู `productsData`

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

### ููุฒุงุช ุฅุถุงููุฉ ูุญุชููุฉ:

1. **ุญุณุงุจ ุงููุฒู ุงูุฅุฌูุงูู**
   - ุฅุถุงูุฉ `weightPerBox`
   - ุนุฑุถ ุงููุฒู ุงูููู

2. **ุฎุตููุงุช ูุฑุฆูุฉ**
   - ุนุฑุถ ุงูุณุนุฑ ูุจู ุงูุฎุตู
   - ุนุฑุถ ูุณุจุฉ ุงูุฎุตู
   - ุงูุณุนุฑ ุงูููุงุฆู

3. **ุฑุณู ุจูุงูู ุตุบูุฑ**
   - ููุงุฑูุฉ ุงููููุงุช
   - ุชูุฒูุน ุงูุฃุณุนุงุฑ

4. **ุชูุจููุงุช ุฐููุฉ**
   - ุชูุจูู ุฅุฐุง ูุงู ุงูุณุนุฑ ุฃูู ูู ุงูุชูููุฉ
   - ุชูุจูู ุฅุฐุง ูุงูุช ุงููููุฉ ูุจูุฑุฉ ุฌุฏุงู

---

## โ ุงูุฎูุงุตุฉ

ุชู ุจูุฌุงุญ ุชุญุณูู modal ุงูุชุนุฏูู ุจุฅุถุงูุฉ:

โ **ุนุฑุถ ุนุฏุฏ ุงูุฃูุชุงุฑ** ุฅุฐุง ูุงู ุงูุตูู ุจุงูุตูุฏูู  
โ **ุนุฑุถ ุงูุณุนุฑ ููู ูุชุฑ** ุจุงูุฅุถุงูุฉ ููุณุนุฑ ุงูููู  
โ **ูุนูููุงุช ุชูุตูููุฉ** ุนู ูู ุตูู  
โ **ุญุณุงุจุงุช ุชููุงุฆูุฉ** ุชุชุญุฏุซ ููุฑุงู  
โ **ูุงุฌูุฉ ูุทูุฑุฉ** ุจุฃููุงู ูุฑููุฒ ูุงุถุญุฉ  
โ **ุชุตููู ุงุญุชุฑุงูู** ูุน gradient ูshadows  

**ุงูููุฒุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู! ๐**

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 2025-11-04  
**ุงูุฅุตุฏุงุฑ:** 2.1.0  
**ููุน ุงูุชุญุฏูุซ:** Enhancement - ุชุญุณูู UI/UX  
**ูุฑุชุจุท ุจู:** `FULL_INVOICE_EDIT_FEATURE.md`, `CHANGELOG_FULL_EDIT.md`

