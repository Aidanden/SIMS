# ุฅุถุงูุฉ ูุญุฏุงุช ุฌุฏูุฏุฉ: ููุณ ู ูุชุฑ

## ุงููุญุฏุงุช ุงููุฏุนููุฉ ุงูุขู:

| ุงููุญุฏุฉ | ุงูุงุณุชุฎุฏุงู | ุทุฑููุฉ ุงูุญุณุงุจ | ุญูู unitsPerBox |
|--------|-----------|--------------|----------------|
| **ุตูุฏูู** | ููุณูุฑุงููู ูุงูุจูุงุท | ููุญุณุจ ุจุงููุชุฑ ุงููุฑุจุน (unitsPerBox ร ุนุฏุฏ ุงูุตูุงุฏูู) | โ ูุธูุฑ |
| **ูุทุนุฉ** | ูููุทุน ุงููุฑุฏูุฉ | ููุญุณุจ ุจุงููุทุน ูุจุงุดุฑุฉ (ูุง ุชุญููู) | โ ูุฎูู |
| **ููุณ** | ููููุงุฏ ุงููุนุจุฃุฉ ุจุงูุฃููุงุณ | ููุญุณุจ ุจุงูุฃููุงุณ ูุจุงุดุฑุฉ (ูุญุฏุฉ ูุณุชููุฉ) | โ ูุฎูู |
| **ูุชุฑ** | ููุณูุงุฆู ูุงูููุงุฏ ุงูุณุงุฆูุฉ | ููุญุณุจ ุจุงููุชุฑุงุช ูุจุงุดุฑุฉ (ูุญุฏุฉ ูุณุชููุฉ) | โ ูุฎูู |

---

## ุงูุชุบููุฑุงุช ุงููุทุจูุฉ:

### 1. ุตูุญุฉ ุงูุฃุตูุงู (`/client/src/app/products/page.tsx`):

#### ุฃ. ุชุนุฑูู ุงูุฃููุงุน (Types):
```typescript
// ูุจู โ
const [createUnit, setCreateUnit] = useState<'ุตูุฏูู' | 'ูุทุนุฉ'>('ุตูุฏูู');
const [editUnit, setEditUnit] = useState<'ุตูุฏูู' | 'ูุทุนุฉ'>('ุตูุฏูู');

// ุจุนุฏ โ
const [createUnit, setCreateUnit] = useState<'ุตูุฏูู' | 'ูุทุนุฉ' | 'ููุณ' | 'ูุชุฑ'>('ุตูุฏูู');
const [editUnit, setEditUnit] = useState<'ุตูุฏูู' | 'ูุทุนุฉ' | 'ููุณ' | 'ูุชุฑ'>('ุตูุฏูู');
```

#### ุจ. ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูู ููุฏุงู ุงูุฅุถุงูุฉ:
```typescript
<select
  name="unit"
  value={createUnit}
  onChange={(e) => setCreateUnit(e.target.value as 'ุตูุฏูู' | 'ูุทุนุฉ' | 'ููุณ' | 'ูุชุฑ')}
>
  <option value="ุตูุฏูู">ุตูุฏูู</option>
  <option value="ูุทุนุฉ">ูุทุนุฉ</option>
  <option value="ููุณ">ููุณ</option>      {/* โ ุฌุฏูุฏ */}
  <option value="ูุชุฑ">ูุชุฑ</option>      {/* โ ุฌุฏูุฏ */}
</select>
```

#### ุฌ. ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูู ููุฏุงู ุงูุชุนุฏูู:
```typescript
<select
  name="unit"
  value={editUnit}
  onChange={(e) => setEditUnit(e.target.value as 'ุตูุฏูู' | 'ูุทุนุฉ' | 'ููุณ' | 'ูุชุฑ')}
>
  <option value="ุตูุฏูู">ุตูุฏูู</option>
  <option value="ูุทุนุฉ">ูุทุนุฉ</option>
  <option value="ููุณ">ููุณ</option>      {/* โ ุฌุฏูุฏ */}
  <option value="ูุชุฑ">ูุชุฑ</option>      {/* โ ุฌุฏูุฏ */}
</select>
```

#### ุฏ. ุฅุฎูุงุก ุญูู unitsPerBox ูููุญุฏุงุช ุบูุฑ ุงูุตูุฏูู:
```typescript
// โ ุงูุญูู ูุธูุฑ ููุท ููุตูุฏูู:
{createUnit === 'ุตูุฏูู' && (
  <div>
    <label>ุนุฏุฏ ุงููุญุฏุงุช ูู ุงูุตูุฏูู (ุจุงููุชุฑ ุงููุฑุจุน)</label>
    <input
      name="unitsPerBox"
      placeholder="ูุซุงู: 1.44 (1.44 ูุชุฑ ูุฑุจุน ูู ุงูุตูุฏูู)"
    />
  </div>
)}

// ุงููุชูุฌุฉ:
// - ุตูุฏูู โ ูุธูุฑ ุงูุญูู โ
// - ูุทุนุฉ โ ุงูุญูู ูุฎูู โ
// - ููุณ โ ุงูุญูู ูุฎูู โ
// - ูุชุฑ โ ุงูุญูู ูุฎูู โ
```

---

### 2. ุตูุญุฉ ุงููุจูุนุงุช (`/client/src/app/sales/page.tsx`):

#### ุนุฑุถ ุงููููุฉ ุงูุฅุฌูุงููุฉ:
```typescript
<label>
  {
    selectedProduct?.unit === 'ุตูุฏูู' 
      ? 'ุงููููุฉ ุงูุฅุฌูุงููุฉ ุจุงููุชุฑ'
      : selectedProduct?.unit === 'ูุทุนุฉ'
        ? 'ุฅุฌูุงูู ุงููุทุน'
        : selectedProduct?.unit === 'ููุณ'
          ? 'ุฅุฌูุงูู ุงูุฃููุงุณ'      // โ ุฌุฏูุฏ
          : selectedProduct?.unit === 'ูุชุฑ'
            ? 'ุฅุฌูุงูู ุงููุชุฑุงุช'     // โ ุฌุฏูุฏ
            : 'ุงููููุฉ ุงูุฅุฌูุงููุฉ'
  }
</label>
```

#### ุญุณุงุจ ุงููููุฉ:
```typescript
{line.qty > 0 ? (
  selectedProduct?.unit === 'ุตูุฏูู' && selectedProduct?.unitsPerBox
    ? `${formatArabicArea(line.qty * Number(selectedProduct.unitsPerBox))} ูุชุฑ`
    : `${formatArabicArea(line.qty)} ${selectedProduct?.unit || 'ูุญุฏุฉ'}`
) : '0'}
```

**ุงูุดุฑุญ**:
- **ุตูุฏูู**: ููุญุณุจ `line.qty ร unitsPerBox` ูููุนุฑุถ ุจุงููุชุฑ
- **ูุทุนุฉ / ููุณ / ูุชุฑ**: ููุนุฑุถ `line.qty` ูุจุงุดุฑุฉ ูุน ุงุณู ุงููุญุฏุฉ

---

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู:

### ูุซุงู 1: ุตูู ุจูุญุฏุฉ "ุตูุฏูู" (ุงูุณูุฑุงููู):
```
ุงูุตูู: ุจูุงุท ุณูุฑุงููู ุฃุจูุถ
ุงููุญุฏุฉ: ุตูุฏูู
ุนุฏุฏ ุงููุญุฏุงุช ูู ุงูุตูุฏูู: 1.44 ูุชุฑ

ูู ุงููุงุชูุฑุฉ:
- ุงููููุฉ: 10 ุตูุงุฏูู
- ุงูุฅุฌูุงูู: 10 ร 1.44 = 14.4 ูุชุฑ โ
```

### ูุซุงู 2: ุตูู ุจูุญุฏุฉ "ูุทุนุฉ":
```
ุงูุตูู: ุจุงุจ ุฎุดุจู
ุงููุญุฏุฉ: ูุทุนุฉ
ุนุฏุฏ ุงููุทุน ูู ุงูุตูุฏูู: 1

ูู ุงููุงุชูุฑุฉ:
- ุงููููุฉ: 5 ูุทุน
- ุงูุฅุฌูุงูู: 5 ูุทุนุฉ โ (ูุง ุชุญููู)
```

### ูุซุงู 3: ุตูู ุจูุญุฏุฉ "ููุณ" (ุฌุฏูุฏ):
```
ุงูุตูู: ุฅุณููุช
ุงููุญุฏุฉ: ููุณ
unitsPerBox: ูุง ููุฌุฏ (ุงูุญูู ูุฎูู)

ูู ุงููุงุชูุฑุฉ:
- ุงููููุฉ: 100 ููุณ
- ุงูุฅุฌูุงูู: 100 ููุณ โ (ูุง ุชุญูููุ ูุญุฏุฉ ูุณุชููุฉ)
```

### ูุซุงู 4: ุตูู ุจูุญุฏุฉ "ูุชุฑ" (ุฌุฏูุฏ):
```
ุงูุตูู: ุฏูุงู ุฃุจูุถ
ุงููุญุฏุฉ: ูุชุฑ
unitsPerBox: ูุง ููุฌุฏ (ุงูุญูู ูุฎูู)

ูู ุงููุงุชูุฑุฉ:
- ุงููููุฉ: 50 ูุชุฑ
- ุงูุฅุฌูุงูู: 50 ูุชุฑ โ (ูุง ุชุญูููุ ูุญุฏุฉ ูุณุชููุฉ)
```

---

## ููุทู ุงูุญุณุงุจ:

### ูู ุงูููุงุชูุฑ:
```typescript
// ููุตูุฏูู ููุท:
if (unit === 'ุตูุฏูู' && unitsPerBox) {
  totalUnits = qty ร unitsPerBox;  // ุจุงููุชุฑ ุงููุฑุจุน
  display = `${totalUnits} ูุชุฑ`;
}

// ูุจุงูู ุงููุญุฏุงุช (ูุทุนุฉุ ููุณุ ูุชุฑ):
else {
  totalUnits = qty;  // ูุจุงุดุฑุฉ
  display = `${qty} ${unit}`;
}
```

### ูู ุงููุฎุฒูู:
```typescript
// ุฌููุน ุงููุญุฏุงุช ุชูุฎุฒู ุจุงูุตูุงุฏูู:
stock.boxes = ุนุฏุฏ ุงูุตูุงุฏูู

// ุนูุฏ ุงูุจูุน:
stock.boxes -= qty;  // qty = ุนุฏุฏ ุงูุตูุงุฏูู ุฏุงุฆูุงู
```

---

## ูุงุนุฏุฉ ุงูุจูุงูุงุช:

### Schema (Prisma):
```prisma
model Product {
  id           Int      @id @default(autoincrement())
  sku          String   @unique
  name         String
  unit         String?  // โ String ูุฑู (ููุจู ุฃู ูุญุฏุฉ)
  unitsPerBox  Float?   // ุนุฏุฏ ุงููุญุฏุงุช ูู ุงูุตูุฏูู
  // ...
}
```

**ููุงุญุธุฉ**: 
- ุญูู `unit` ูู ููุน `String` (ููุณ enum)
- ูุฐุง ูุณูุญ ุจุฅุถุงูุฉ ูุญุฏุงุช ุฌุฏูุฏุฉ ุจุณูููุฉ ุจุฏูู migration
- Frontend ูุชุญูู ูู ุงููุญุฏุงุช ุงููุชุงุญุฉ

---

## ุงูููุงุฆุฏ:

### 1. ูุฑููุฉ:
- โ ุฅุถุงูุฉ ูุญุฏุงุช ุฌุฏูุฏุฉ ุจุณูููุฉ
- โ ูุง ุญุงุฌุฉ ูู database migration
- โ Frontend ูุชุญูู ูู ุงูุฎูุงุฑุงุช

### 2. ูุถูุญ:
- โ ูู ูุญุฏุฉ ููุง ุชุณููุฉ ูุงุถุญุฉ
- โ Labels ุฏููุงููููุฉ ุญุณุจ ุงููุญุฏุฉ
- โ ุนุฑุถ ููุงุณุจ ูู ุงูููุงุชูุฑ

### 3. ุจุณุงุทุฉ:
- โ "ููุณ" ู "ูุชุฑ" ููุนุงููุงู ูุซู "ูุทุนุฉ"
- โ ูุง ุญุณุงุจุงุช ูุนูุฏุฉ
- โ ููุทู ููุญุฏ

---

## ุฅุถุงูุฉ ูุญุฏุงุช ุฌุฏูุฏุฉ ูุณุชูุจูุงู:

ุฅุฐุง ุฃุฑุฏุช ุฅุถุงูุฉ ูุญุฏุฉ ุฌุฏูุฏุฉ (ูุซู "ูุฑุชูู" ุฃู "ุทู"):

### 1. ูู `/client/src/app/products/page.tsx`:
```typescript
// ุฃุถู ุงููุญุฏุฉ ููู type:
const [createUnit, setCreateUnit] = useState<'ุตูุฏูู' | 'ูุทุนุฉ' | 'ููุณ' | 'ูุชุฑ' | 'ูุฑุชูู'>('ุตูุฏูู');

// ุฃุถู option ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ:
<option value="ูุฑุชูู">ูุฑุชูู</option>
```

### 2. ูู `/client/src/app/sales/page.tsx`:
```typescript
// ุฃุถู ุญุงูุฉ ูู ุนุฑุถ ุงููููุฉ:
: selectedProduct?.unit === 'ูุฑุชูู'
  ? 'ุฅุฌูุงูู ุงููุฑุงุชูู'
  : 'ุงููููุฉ ุงูุฅุฌูุงููุฉ'
```

### 3. ูุฑุฑ ุทุฑููุฉ ุงูุญุณุงุจ:
- **ุฅุฐุง ูุงูุช ูุซู "ุตูุฏูู"**: ุฃุถู ููุทู ุญุณุงุจ ุจุงููุชุฑ
- **ุฅุฐุง ูุงูุช ูุซู "ูุทุนุฉ"**: ูุง ุชูุนู ุดูุก (ุชูุญุณุจ ูุจุงุดุฑุฉ)

---

## ุงููููุงุช ุงููุนุฏูุฉ:

1. โ `/client/src/app/products/page.tsx`:
   - ุงูุณุทุฑ 60-61: ุชุนุฑูู ุงูุฃููุงุน
   - ุงูุณุทุฑ 74: ูุฒุงููุฉ ุงููุญุฏุฉ ูู ุงูุชุนุฏูู
   - ุงูุณุทุฑ 1047-1053: ุงููุงุฆูุฉ ุงูููุณุฏูุฉ (ููุฏุงู ุงูุฅุถุงูุฉ)
   - ุงูุณุทุฑ 1192-1198: ุงููุงุฆูุฉ ุงูููุณุฏูุฉ (ููุฏุงู ุงูุชุนุฏูู)

2. โ `/client/src/app/sales/page.tsx`:
   - ุงูุณุทุฑ 1420-1429: ุนุฑุถ ุงููููุฉ ุงูุฅุฌูุงููุฉ

3. โ `/NEW_UNITS_FEATURE.md`: ูุฐุง ุงูููู (ุงูุชูุซูู)

---

## ุงูุงุฎุชุจุงุฑ:

### 1. ุฅุถุงูุฉ ุตูู ุจูุญุฏุฉ "ููุณ":
```
1. ุงุถุบุท "ุตูู ุฌุฏูุฏ"
2. ุงููุฃ ุงูุจูุงูุงุช:
   - ุงูุงุณู: ุฅุณููุช
   - ุงูููุฏ: CEM-001
   - ุงููุญุฏุฉ: ููุณ
   - โ ุญูู "ุนุฏุฏ ุงููุญุฏุงุช ูู ุงูุตูุฏูู" ูุฎูู (ูุง ูุธูุฑ)
   - ุงูุณุนุฑ: 25 ุฏ.ู
3. ุงุญูุธ
4. โ ุงููุชูุฌุฉ: ุงูุตูู ูููุดุฃ ุจูุญุฏุฉ "ููุณ" (ูุญุฏุฉ ูุณุชููุฉ)
```

### 2. ุฅุถุงูุฉ ุตูู ุจูุญุฏุฉ "ูุชุฑ":
```
1. ุงุถุบุท "ุตูู ุฌุฏูุฏ"
2. ุงููุฃ ุงูุจูุงูุงุช:
   - ุงูุงุณู: ุฏูุงู ุฃุจูุถ
   - ุงูููุฏ: PAINT-001
   - ุงููุญุฏุฉ: ูุชุฑ
   - โ ุญูู "ุนุฏุฏ ุงููุญุฏุงุช ูู ุงูุตูุฏูู" ูุฎูู (ูุง ูุธูุฑ)
   - ุงูุณุนุฑ: 15 ุฏ.ู
3. ุงุญูุธ
4. โ ุงููุชูุฌุฉ: ุงูุตูู ูููุดุฃ ุจูุญุฏุฉ "ูุชุฑ" (ูุญุฏุฉ ูุณุชููุฉ)
```

### 3. ุฅูุดุงุก ูุงุชูุฑุฉ ุจุตูู "ููุณ":
```
1. ุงูุชุญ ุดุงุดุฉ ุงููุจูุนุงุช
2. ุฃุถู ุงูุตูู "ุฅุณููุช" (ููุณ)
3. ุฃุฏุฎู ุงููููุฉ: 100 ููุณ
4. โ ุงููุชูุฌุฉ: 
   - Label: "ุงููููุฉ (ููุณ)"
   - ุงูุฅุฌูุงูู: "100 ููุณ"
   - ูุง ุชุญููู ูููุชุฑ
```

### 4. ุฅูุดุงุก ูุงุชูุฑุฉ ุจุตูู "ูุชุฑ":
```
1. ุงูุชุญ ุดุงุดุฉ ุงููุจูุนุงุช
2. ุฃุถู ุงูุตูู "ุฏูุงู ุฃุจูุถ" (ูุชุฑ)
3. ุฃุฏุฎู ุงููููุฉ: 50 ูุชุฑ
4. โ ุงููุชูุฌุฉ:
   - Label: "ุงููููุฉ (ูุชุฑ)"
   - ุงูุฅุฌูุงูู: "50 ูุชุฑ"
   - ูุง ุชุญููู ูููุชุฑ
```

---

## ุงูุฎูุงุตุฉ:

**ุงููุญุฏุงุช ุงููุฏุนููุฉ**:
- โ ุตูุฏูู (ููุญุณุจ ุจุงููุชุฑุ ุญูู unitsPerBox ูุธูุฑ)
- โ ูุทุนุฉ (ูุจุงุดุฑุฉุ ูุญุฏุฉ ูุณุชููุฉ)
- โ ููุณ (ูุจุงุดุฑุฉุ ูุญุฏุฉ ูุณุชููุฉ - ุฌุฏูุฏ)
- โ ูุชุฑ (ูุจุงุดุฑุฉุ ูุญุฏุฉ ูุณุชููุฉ - ุฌุฏูุฏ)

**ุงููุนุงููุฉ**:
- **ุตูุฏูู**: ูุญุฏุฉ ุฎุงุตุฉ (ููุญุณุจ ร unitsPerBox ุจุงููุชุฑ ุงููุฑุจุน)
- **ูุทุนุฉุ ููุณุ ูุชุฑ**: ูุญุฏุงุช ูุณุชููุฉ ุชูุงูุงู (ุจุฏูู ุชุญูููุ ุจุฏูู ุตูุงุฏูู)

**ุงููุชูุฌุฉ**:
- ๐ฏ **ูุฑููุฉ ูู ุฅุถุงูุฉ ูุญุฏุงุช ุฌุฏูุฏุฉ**
- ๐ **ุนุฑุถ ูุงุถุญ ูููุงุณุจ ููู ูุญุฏุฉ**
- ๐ช **ููุทู ุจุณูุท ูุณูู ุงูุตูุงูุฉ**
- โ **ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู**

**ุงูุขู ููููู ุฅุถุงูุฉ ุฃุตูุงู ุจูุญุฏุงุช: ุตูุฏููุ ูุทุนุฉุ ููุณุ ุฃู ูุชุฑ!** ๐
