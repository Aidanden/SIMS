# ๐จโ๐ผ ุฏุนู ุงุฎุชูุงุฑ ุงูุดุฑูุฉ ููู Admin ูู ูุญุงุถุฑ ุงูุฅุชูุงู

## โ ุงูุชุญุฏูุซ ุงูููููุฐ

ุชู ุฅุถุงูุฉ ุฅููุงููุฉ ุงุฎุชูุงุฑ ุงูุดุฑูุฉ ูููุณุชุฎุฏู Admin (System User) ููุชููู ูู ุงูุนูู ุนูู ุฌููุน ุงูุดุฑูุงุช.

---

## ๐ฏ ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ

### **Admin ูุณุชุทูุน ุงุฎุชูุงุฑ ุงูุดุฑูุฉ**
- โ ูุงุฆูุฉ ููุณุฏูุฉ ูุงุฎุชูุงุฑ ุงูุดุฑูุฉ ูู ุงูู Header
- โ ุฎูุงุฑ "ุฌููุน ุงูุดุฑูุงุช" ูุนุฑุถ ุฌููุน ุงููุญุงุถุฑ
- โ ุชุตููุฉ ุงูุฃุตูุงู ูุงููุญุงุถุฑ ุญุณุจ ุงูุดุฑูุฉ ุงููุฎุชุงุฑุฉ
- โ ุชุนุทูู ุฒุฑ "ุฅูุดุงุก ูุญุถุฑ" ุญุชู ูุชู ุงุฎุชูุงุฑ ุดุฑูุฉ
- โ ุฑุณุงูุฉ ุชูุจูู ูุงุถุญุฉ ุนูุฏ ุนุฏู ุงุฎุชูุงุฑ ุงูุดุฑูุฉ

---

## ๐จ ุงููุงุฌูุฉ

### ููู Admin (System User):
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ูุญุงุถุฑ ุงูุฅุชูุงู                                โ
โ                                                 โ
โ ุงูุดุฑูุฉ: [ุงุฎุชุฑ ุงูุดุฑูุฉ โผ]  [+ ุฅูุดุงุก ูุญุถุฑ ุฅุชูุงู] โ
โ         โโ ุฌููุน ุงูุดุฑูุงุช                        โ
โ         โโ ุดุฑูุฉ ุงูุชูุงุฒู                        โ
โ         โโ ุงููุฑุน ุงูุดุฑูู                        โ
โ         โโ ุงููุฑุน ุงูุบุฑุจู                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โน๏ธ ูุฑุฌู ุงุฎุชูุงุฑ ุงูุดุฑูุฉ                          โ
โ ุงุฎุชุฑ ุงูุดุฑูุฉ ูู ุงููุงุฆูุฉ ุฃุนูุงู ูุนุฑุถ ูุญุงุถุฑ       โ
โ ุงูุฅุชูุงู ูุงูุฃุตูุงู ุงูุฎุงุตุฉ ุจูุง                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ูููุณุชุฎุฏู ุงูุนุงุฏู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ูุญุงุถุฑ ุงูุฅุชูุงู โข ุดุฑูุชู                       โ
โ                        [+ ุฅูุดุงุก ูุญุถุฑ ุฅุชูุงู]    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ง ุงูุชุบููุฑุงุช ุงูุชูููุฉ

### 1. ุฅุถุงูุฉ State ูุงุฎุชูุงุฑ ุงูุดุฑูุฉ:
```typescript
const [selectedCompanyId, setSelectedCompanyId] = useState<number | null>(
  userCompanyId || null
);
```

### 2. ุฌูุจ ูุงุฆูุฉ ุงูุดุฑูุงุช:
```typescript
const { data: companiesData } = useGetCompaniesQuery({});
const companies = (companiesData?.data as any)?.companies || [];
```

### 3. ุชุตููุฉ ุงูุจูุงูุงุช ุญุณุจ ุงูุดุฑูุฉ ุงููุฎุชุงุฑุฉ:
```typescript
// ูู getDamageReportsQuery
companyId: isSystemUser ? selectedCompanyId || undefined : undefined

// ูู getProductsQuery
companyId: isSystemUser ? selectedCompanyId || undefined : userCompanyId
```

### 4. ุชุตููุฉ ุงูุฃุตูุงู ูู ุงูุจุญุซ:
```typescript
const targetCompanyId = isSystemUser ? selectedCompanyId : userCompanyId;
if (targetCompanyId) {
  const isFromTargetCompany = product.companyId === targetCompanyId;
  const isFromParentCompany = product.createdByCompanyId === 1;
  if (!isFromTargetCompany && !isFromParentCompany) {
    return false;
  }
}
```

### 5. UI ููู Admin:
```typescript
{isSystemUser && (
  <div className="flex items-center gap-2">
    <label>ุงูุดุฑูุฉ:</label>
    <select
      value={selectedCompanyId || ''}
      onChange={(e) => {
        const value = e.target.value;
        setSelectedCompanyId(value ? parseInt(value) : null);
        setCurrentPage(1);
      }}
    >
      <option value="">ุฌููุน ุงูุดุฑูุงุช</option>
      {companies.map((company: any) => (
        <option key={company.id} value={company.id}>
          {company.name}
        </option>
      ))}
    </select>
  </div>
)}
```

### 6. ุชุนุทูู ุฒุฑ ุงูุฅูุดุงุก:
```typescript
<button
  onClick={() => setShowCreateModal(true)}
  disabled={isSystemUser && !selectedCompanyId}
  title={isSystemUser && !selectedCompanyId ? 'ูุฑุฌู ุงุฎุชูุงุฑ ุงูุดุฑูุฉ ุฃููุงู' : ''}
>
  ุฅูุดุงุก ูุญุถุฑ ุฅุชูุงู
</button>
```

---

## ๐ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุณููุงุฑูู 1: Admin ูุฎุชุงุฑ ุดุฑูุฉ ูุญุฏุฏุฉ
```
1. Admin ูุณุฌู ุงูุฏุฎูู
2. ููุชุญ ุตูุญุฉ ูุญุงุถุฑ ุงูุฅุชูุงู
3. ูุฎุชุงุฑ "ุงููุฑุน ุงูุดุฑูู" ูู ุงููุงุฆูุฉ
4. ูุฑู:
   โ ูุญุงุถุฑ ุงููุฑุน ุงูุดุฑูู ููุท
   โ ุฃุตูุงู ุงููุฑุน ุงูุดุฑูู + ุฃุตูุงู ุงูุชูุงุฒู
   โ ุฅุญุตุงุฆูุงุช ุงููุฑุน ุงูุดุฑูู
5. ููููู ุฅูุดุงุก ูุญุถุฑ ูููุฑุน ุงูุดุฑูู
```

### ุณููุงุฑูู 2: Admin ูุฎุชุงุฑ "ุฌููุน ุงูุดุฑูุงุช"
```
1. Admin ูุฎุชุงุฑ "ุฌููุน ุงูุดุฑูุงุช"
2. ูุฑู:
   โ ุฌููุน ุงููุญุงุถุฑ ูู ุฌููุน ุงูุดุฑูุงุช
   โ ุฅุญุตุงุฆูุงุช ุฅุฌูุงููุฉ
3. ูุง ููููู ุฅูุดุงุก ูุญุถุฑ (ูุฌุจ ุงุฎุชูุงุฑ ุดุฑูุฉ ูุญุฏุฏุฉ)
4. ุฑุณุงูุฉ ุชูุจูู: "ูุฑุฌู ุงุฎุชูุงุฑ ุงูุดุฑูุฉ"
```

### ุณููุงุฑูู 3: Admin ูุจุฏู ุจูู ุงูุดุฑูุงุช
```
1. Admin ูุฎุชุงุฑ "ุงููุฑุน ุงูุดุฑูู"
2. ูุฑู ุจูุงูุงุช ุงููุฑุน ุงูุดุฑูู
3. ูุจุฏู ุฅูู "ุงููุฑุน ุงูุบุฑุจู"
4. ูุฑู ุจูุงูุงุช ุงููุฑุน ุงูุบุฑุจู
5. ุงูุตูุญุฉ ุชูุนุงุฏ ุฅูู ุงูุตูุญุฉ ุงูุฃููู ุชููุงุฆูุงู
```

### ุณููุงุฑูู 4: ูุณุชุฎุฏู ุนุงุฏู
```
1. ูุณุชุฎุฏู ุนุงุฏู ูุณุฌู ุงูุฏุฎูู
2. ูุง ูุฑู ูุงุฆูุฉ ุงุฎุชูุงุฑ ุงูุดุฑูุฉ
3. ูุฑู ููุท ุจูุงูุงุช ุดุฑูุชู
4. ูุง ููููู ุงูุชุจุฏูู ุจูู ุงูุดุฑูุงุช
```

---

## ๐ ุงูุฃูุงู

### 1. Frontend Validation:
- โ ุชุนุทูู ุฒุฑ ุงูุฅูุดุงุก ููู Admin ุญุชู ูุฎุชุงุฑ ุดุฑูุฉ
- โ ุฑุณุงูุฉ ุชูุจูู ูุงุถุญุฉ
- โ ุชุตููุฉ ุงูุจูุงูุงุช ุญุณุจ ุงูุดุฑูุฉ ุงููุฎุชุงุฑุฉ

### 2. Backend Validation:
- โ Backend ูุชุญูู ูู `companyId` ูู JWT token
- โ ูุง ูููู ููู Frontend ุงูุชูุงุนุจ ุจุงูุดุฑูุฉ
- โ System User ููุท ููููู ุฑุคูุฉ ุฌููุน ุงูุจูุงูุงุช

### 3. ุนุฒู ุงูุจูุงูุงุช:
- โ ุงููุณุชุฎุฏู ุงูุนุงุฏู ูุง ูุฑู ุฅูุง ุจูุงูุงุช ุดุฑูุชู
- โ Admin ูุฑู ุงูุจูุงูุงุช ุญุณุจ ุงุฎุชูุงุฑู
- โ ูุง ูููู ุงููุตูู ูุจูุงูุงุช ุดุฑูุฉ ุฃุฎุฑู ุจุฏูู ุตูุงุญูุฉ

---

## ๐จ ุงูุชุตููู

### ูุงุฆูุฉ ุงุฎุชูุงุฑ ุงูุดุฑูุฉ:
```css
- ุญุฌู ููุงุณุจ: min-w-[200px]
- ุชุตููู ูุชูุงุณู ูุน ุจุงูู ุงููุงุฌูุฉ
- ุฃููุงู ูุงุถุญุฉ: border-gray-300
- Focus state: ring-red-500
- ุฎูุงุฑุงุช ูุงุถุญุฉ ููุฑุชุจุฉ
```

### ุฑุณุงูุฉ ุงูุชูุจูู:
```css
- ุฎูููุฉ ุฒุฑูุงุก ูุงุชุญุฉ: bg-blue-50
- ุญุฏ ุฃุฒุฑู: border-l-4 border-blue-500
- ุฃููููุฉ ูุนูููุงุช ูุงุถุญุฉ
- ูุต ููุตู ููููุฏ
```

### ุฒุฑ ุงูุฅูุดุงุก ุงููุนุทู:
```css
- opacity-50 ุนูุฏ ุงูุชุนุทูู
- cursor-not-allowed
- tooltip ูุดุฑุญ ุงูุณุจุจ
- ุชุตููู ูุงุถุญ ููุญุงูุฉ ุงููุนุทูุฉ
```

---

## โ ุงูููุงุฆุฏ

- ๐ฏ **ูุฑููุฉ:** Admin ูุนูู ุนูู ุฌููุน ุงูุดุฑูุงุช
- ๐ **ูุถูุญ:** ุฑุณุงุฆู ูุงุถุญุฉ ูุชูุจููุงุช ูููุฏุฉ
- ๐ **ุฃูุงู:** ุนุฒู ูุงูู ูุน ุตูุงุญูุงุช ูุญุฏุฏุฉ
- โก **ุณุฑุนุฉ:** ุชุจุฏูู ุณุฑูุน ุจูู ุงูุดุฑูุงุช
- ๐ก **ุณูููุฉ:** ูุงุฌูุฉ ุจุฏูููุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู

---

## ๐ ููุงุญุธุงุช ูููุฉ

### โ ูุง ูุนูู:
1. Admin ูุฎุชุงุฑ ุงูุดุฑูุฉ ููุฑู ุจูุงูุงุชูุง
2. Admin ูุฎุชุงุฑ "ุฌููุน ุงูุดุฑูุงุช" ููุฑู ุฌููุน ุงููุญุงุถุฑ
3. ุงููุณุชุฎุฏู ุงูุนุงุฏู ูุง ูุฑู ุฅูุง ุจูุงูุงุช ุดุฑูุชู
4. ุชุตููุฉ ุชููุงุฆูุฉ ููุฃุตูุงู ูุงููุญุงุถุฑ
5. ุฑุณุงุฆู ุชูุจูู ูุงุถุญุฉ

### โ๏ธ ูููุฏ:
1. Admin ูุฌุจ ุฃู ูุฎุชุงุฑ ุดุฑูุฉ ูุญุฏุฏุฉ ูุฅูุดุงุก ูุญุถุฑ
2. ูุง ูููู ุฅูุดุงุก ูุญุถุฑ ุนูุฏ ุงุฎุชูุงุฑ "ุฌููุน ุงูุดุฑูุงุช"
3. ุงููุณุชุฎุฏู ุงูุนุงุฏู ูุง ููููู ุงูุชุจุฏูู ุจูู ุงูุดุฑูุงุช

---

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

ุงููุธุงู ุงูุขู ูุฏุนู Admin ุจุดูู ูุงูู:
- โ ุงุฎุชูุงุฑ ุงูุดุฑูุฉ ูู ูุงุฆูุฉ ููุณุฏูุฉ
- โ ุนุฑุถ ุจูุงูุงุช ุงูุดุฑูุฉ ุงููุฎุชุงุฑุฉ
- โ ุฅูุดุงุก ูุญุงุถุฑ ูุฃู ุดุฑูุฉ
- โ ุฑุณุงุฆู ุชูุจูู ูุงุถุญุฉ
- โ ุฃูุงู ูุนุฒู ูุงูู

**๐ Admin ุงูุขู ูุณุชุทูุน ุงูุนูู ุนูู ุฌููุน ุงูุดุฑูุงุช ุจุณูููุฉ!**
