# ๐ฐ ุชุญุฏูุซ: ุงูุฅุฏุฎุงู ุจุงูุณุนุฑ ููู ูุชุฑ

## ๐ฏ ุงูุชุบููุฑ

ุชู ุชุนุฏูู modal ุงูุชุนุฏูู ููููู ุงูุฅุฏุฎุงู **ุจุงูุณุนุฑ ููู ูุชุฑ** ุจุฏูุงู ูู ุงูุณุนุฑ ููู ุตูุฏูู.

---

## ๐ ุงูููุงุฑูุฉ

### ูุจู ุงูุชุญุฏูุซ โ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุณุนุฑ/ุตูุฏูู: [15.50]      โ
โ ๐ฐ 6.20 ุฏ.ู/ูุชุฑ (ุญุณุงุจู)   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```
- ุงูุฅุฏุฎุงู: ุงูุณุนุฑ ููุตูุฏูู ุงููุงูู
- ุงููุดููุฉ: ูุฌุจ ุญุณุงุจ ุงูุณุนุฑ ููู ูุชุฑ ูุฏููุงู

### ุจุนุฏ ุงูุชุญุฏูุซ โ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุณุนุฑ/ูุชุฑ: [6.20]          โ
โ ๐ฆ 15.50 ุฏ.ู/ุตูุฏูู (ุญุณุงุจู)โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```
- ุงูุฅุฏุฎุงู: ุงูุณุนุฑ ููู ูุชุฑ ูุจุงุดุฑุฉู
- ุงูููุฒุฉ: ูุญุณุจ ุชููุงุฆูุงู ุงูุณุนุฑ ุงูุฅุฌูุงูู ููุตูุฏูู

---

## ๐จ ุงููุงุฌูุฉ ุงูุฌุฏูุฏุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุตูู: [ุจูุงุท ABC-001 - ABC001]              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงููููุฉ (ุตูุฏูู): [50]         [๐๏ธ ุญุฐู]     โ
โ ๐ 125.00 ูุชุฑ                               โ
โ                                              โ
โ ุงูุณุนุฑ/ูุชุฑ: [6.20] โฌ๏ธ ุงูุฅุฏุฎุงู ุงูุฑุฆูุณู      โ
โ ๐ฆ 15.50 ุฏ.ู/ุตูุฏูู โฌ๏ธ ูุญุณุจ ุชููุงุฆูุงู        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ูุนูููุงุช ุชูุตูููุฉ]                           โ
โ                                              โ
โ ุงููุญุฏุฉ: ุตูุฏูู       โ ุงููุฌููุน: 775.00 ุฏ.ู  โ
โ ูุชุฑ/ุตูุฏูู: 2.50     โ ุฅุฌูุงูู: 125.00 ู     โ
โ ุงูุณุนุฑ/ูุชุฑ: 6.20 ุฏ.ู โ ุงูุณุนุฑ/ุตูุฏูู: 15.50   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ข ููู ูุนูู

### 1. **ุงูุฅุฏุฎุงู:**
```
ุงููุณุชุฎุฏู ูุฏุฎู: 6.20 ุฏ.ู/ูุชุฑ
```

### 2. **ุงูุญุณุงุจ ุงูุชููุงุฆู:**
```typescript
ุงูุณุนุฑ ุงูุฅุฌูุงูู ููุตูุฏูู = ุงูุณุนุฑ/ูุชุฑ ร ูุชุฑ/ุตูุฏูู
                       = 6.20 ร 2.50
                       = 15.50 ุฏ.ู/ุตูุฏูู
```

### 3. **ุงูุชุฎุฒูู:**
```
ููุฎุฒู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: 15.50 ุฏ.ู (ุงูุณุนุฑ ุงูุฅุฌูุงูู)
```

### 4. **ุงููุฌููุน:**
```
ุงููุฌููุน = ุงููููุฉ ร ุงูุณุนุฑ ุงูุฅุฌูุงูู ููุตูุฏูู
        = 50 ร 15.50
        = 775.00 ุฏ.ู
```

---

## ๐ป ุงูููุฏ ุงูุชููู

### 1. **ุฏุงูุฉ ุงูุญุณุงุจ ุงูุฌุฏูุฏุฉ:**

```typescript
// ุฏุงูุฉ ูุชุญุฏูุซ ุงูุณุนุฑ ูู ุงูุณุนุฑ/ูุชุฑ
const updatePriceFromUnitPrice = (index: number, pricePerUnit: number) => {
  const product = productsData?.data?.products?.find(
    p => p.id === editLines[index].productId
  );
  
  const unitsPerBox = product?.unitsPerBox 
    ? Number(product.unitsPerBox) 
    : 1;
    
  const totalPrice = pricePerUnit * unitsPerBox;
  
  updateEditLine(index, 'unitPrice', totalPrice);
};
```

### 2. **ุญูู ุงูุฅุฏุฎุงู:**

```tsx
{/* ุงูุณุนุฑ */}
<div className="col-span-3">
  <label className="block text-xs font-medium text-gray-700 mb-1">
    ุงูุณุนุฑ/ูุชุฑ
  </label>
  <input
    type="number"
    value={pricePerUnit || 0}
    onChange={(e) => updatePriceFromUnitPrice(index, Number(e.target.value))}
    min="0.01"
    step="0.01"
    className="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
    required
  />
  {unitsPerBox && line.unitPrice > 0 && (
    <p className="text-xs text-blue-600 mt-0.5">
      ๐ฆ {formatArabicCurrency(line.unitPrice)}/ุตูุฏูู
    </p>
  )}
</div>
```

### 3. **ุงููุนูููุงุช ุงูุชูุตูููุฉ:**

```tsx
{/* ุงูุนููุฏ ุงูุฃูุณุฑ */}
<div className="space-y-1">
  {product?.unit && (
    <p className="text-gray-600">
      <span className="font-medium">ุงููุญุฏุฉ:</span> {product.unit}
    </p>
  )}
  {unitsPerBox && (
    <p className="text-gray-600">
      <span className="font-medium">ูุชุฑ/ุตูุฏูู:</span> {formatArabicNumber(unitsPerBox.toFixed(2))}
    </p>
  )}
  {pricePerUnit && (
    <p className="text-green-700 font-medium">
      ุงูุณุนุฑ/ูุชุฑ: {formatArabicCurrency(pricePerUnit)}
    </p>
  )}
</div>

{/* ุงูุนููุฏ ุงูุฃููู */}
<div className="space-y-1 text-left">
  <p className="text-lg font-bold text-blue-700">
    ุงููุฌููุน: {formatArabicCurrency(subtotal)}
  </p>
  {totalUnits && (
    <p className="text-gray-600">
      <span className="font-medium">ุฅุฌูุงูู ุงูุฃูุชุงุฑ:</span> {formatArabicNumber(totalUnits.toFixed(2))} ู
    </p>
  )}
  {unitsPerBox && line.unitPrice > 0 && (
    <p className="text-blue-600">
      ุงูุณุนุฑ/ุตูุฏูู: {formatArabicCurrency(line.unitPrice)}
    </p>
  )}
</div>
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

```
โ client/src/app/accountant/page.tsx
โ client/src/app/sales/page.tsx
๐ PRICE_PER_METER_UPDATE.md (ูุฐุง ุงูููู)
```

---

## ๐ฏ ุงูููุงุฆุฏ

### 1. **ุณูููุฉ ุงูุงุณุชุฎุฏุงู:**
- โ ุงูุฅุฏุฎุงู ูุจุงุดุฑุฉ ุจุงูุณุนุฑ ุงููุชุฑ
- โ ูุง ุญุงุฌุฉ ูุญุณุงุจุงุช ูุฏููุฉ
- โ ุฃุณุฑุน ูู ุฅุฏุฎุงู ุงูุจูุงูุงุช

### 2. **ุฏูุฉ ุฃุนูู:**
- โ ุงูุญุณุงุจุงุช ุชููุงุฆูุฉ (ูุง ุฃุฎุทุงุก)
- โ ุงูุณุนุฑ ุงูุฅุฌูุงูู ููุตูุฏูู ูุญุณูุจ ุจุฏูุฉ
- โ ุงููุฌููุน ุตุญูุญ ุฏุงุฆูุงู

### 3. **ุดูุงููุฉ:**
- โ ุงูุณุนุฑ/ูุชุฑ ูุงุถุญ
- โ ุงูุณุนุฑ/ุตูุฏูู ูุนุฑูุถ
- โ ุฌููุน ุงููุนูููุงุช ูุชุงุญุฉ

---

## ๐งช ูุซุงู ุนููู

### ุงูุณููุงุฑูู:
```
ุงูุตูู: ุจูุงุท ุณูุฑุงููู ABC-001
ุงููููุฉ: 50 ุตูุฏูู
ูุชุฑ/ุตูุฏูู: 2.50 ูุชุฑ
ุงูุณุนุฑ/ูุชุฑ: 6.20 ุฏ.ู
```

### ุงูุญุณุงุจุงุช ุงูุชููุงุฆูุฉ:
```
1๏ธโฃ ุฅุฌูุงูู ุงูุฃูุชุงุฑ:
   = 50 ร 2.50
   = 125.00 ูุชุฑ

2๏ธโฃ ุงูุณุนุฑ/ุตูุฏูู:
   = 6.20 ร 2.50
   = 15.50 ุฏ.ู

3๏ธโฃ ุงููุฌููุน ุงูุฅุฌูุงูู:
   = 50 ร 15.50
   = 775.00 ุฏ.ู
```

### ุงูุนุฑุถ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุจูุงุท ุณูุฑุงููู ABC-001                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงููููุฉ: 50 ุตูุฏูู                        โ
โ ๐ 125.00 ูุชุฑ                           โ
โ                                          โ
โ ุงูุณุนุฑ/ูุชุฑ: 6.20 ุฏ.ู                    โ
โ ๐ฆ 15.50 ุฏ.ู/ุตูุฏูู                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงููุญุฏุฉ: ุตูุฏูู    โ ุงููุฌููุน: 775.00 ุฏ.ู โ
โ ูุชุฑ/ุตูุฏูู: 2.50  โ ุฅุฌูุงูู: 125.00 ู    โ
โ ุงูุณุนุฑ/ูุชุฑ: 6.20  โ ุงูุณุนุฑ/ุตูุฏูู: 15.50  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. **ุงูุชุฎุฒูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
- ููุฎุฒู **ุงูุณุนุฑ ุงูุฅุฌูุงูู ููุตูุฏูู** (unitPrice)
- ูุฐุง ูุถูุงู ุงูุชูุงูู ูุน ุจุงูู ุงููุธุงู
- ูุง ุญุงุฌุฉ ูุชุนุฏููุงุช ุนูู Backend

### 2. **ููุฃุตูุงู ุจุฏูู ุฃูุชุงุฑ:**
- ุฅุฐุง ูู ููู `unitsPerBox` ููุฌูุฏ
- ููุฏุฎู ุงูุณุนุฑ ูุจุงุดุฑุฉู ููุง ูู
- ูุง ุชุธูุฑ ูุนูููุงุช ุงูุฃูุชุงุฑ

### 3. **ุนูุฏ ุงูุชุนุฏูู:**
- ุนูุฏ ูุชุญ modal ุงูุชุนุฏูู ููุงุชูุฑุฉ ููุฌูุฏุฉ
- ููุญุณุจ ุงูุณุนุฑ/ูุชุฑ ูู ุงูุณุนุฑ ุงููุฎุฒู
- ูููู ุชุนุฏููู ูุจุงุดุฑุฉู

---

## โ ุงุฎุชุจุงุฑ ุงูููุฒุฉ

### ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:

1. **ุงูุชุญ modal ุงูุชุนุฏูู:**
   ```bash
   http://localhost:3000/sales
   ุฃู
   http://localhost:3000/accountant
   ```

2. **ุงุฎุชุฑ ุตูู ุจุงูุตูุฏูู**

3. **ุฃุฏุฎู ุงูุณุนุฑ/ูุชุฑ:**
   ```
   ูุซุงู: 6.20 ุฏ.ู
   ```

4. **ูุงุญุธ:**
   - โ ูุธูุฑ ุงูุณุนุฑ/ุตูุฏูู ุชุญุช ุงูุญูู: "๐ฆ 15.50 ุฏ.ู/ุตูุฏูู"
   - โ ูุธูุฑ ูู ุงููุนูููุงุช ุงูุชูุตูููุฉ
   - โ ุงููุฌููุน ููุญุณุจ ุชููุงุฆูุงู

5. **ุบููุฑ ุงููููุฉ:**
   - โ ุงููุฌููุน ูุชุญุฏุซ
   - โ ุฅุฌูุงูู ุงูุฃูุชุงุฑ ูุชุญุฏุซ
   - โ ุงูุณุนุฑ/ูุชุฑ ู ุงูุณุนุฑ/ุตูุฏูู ุซุงุจุชุงู

6. **ุบููุฑ ุงูุณุนุฑ/ูุชุฑ:**
   - โ ุงูุณุนุฑ/ุตูุฏูู ูุชุญุฏุซ ููุฑุงู
   - โ ุงููุฌููุน ูุชุญุฏุซ
   - โ ูู ุดูุก ูุนูู ุจุดูู ุตุญูุญ

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุจูุฌุงุญ ุชุญููู ุงูุฅุฏุฎุงู ูู **ุงูุณุนุฑ/ุตูุฏูู** ุฅูู **ุงูุณุนุฑ/ูุชุฑ**:

โ **ุงูุฅุฏุฎุงู:** ุงูุณุนุฑ/ูุชุฑ (6.20 ุฏ.ู)  
โ **ุงูุญุณุงุจ:** ุงูุณุนุฑ/ุตูุฏูู (15.50 ุฏ.ู) - ุชููุงุฆู  
โ **ุงูุชุฎุฒูู:** ุงูุณุนุฑ ุงูุฅุฌูุงูู (15.50 ุฏ.ู)  
โ **ุงูุนุฑุถ:** ุฌููุน ุงููุนูููุงุช ูุงุถุญุฉ  

**ุงูููุฒุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู! ๐**

---

**ุงูุชุงุฑูุฎ:** 2025-11-04  
**ุงูุฅุตุฏุงุฑ:** 2.2.0  
**ุงูููุน:** Enhancement - ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู  
**ูุฑุชุจุท ุจู:** `INVOICE_EDIT_DETAILED_INFO.md`, `UPDATE_SUMMARY.md`

