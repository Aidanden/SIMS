# ๐ ูุณุฎ ูุธุงู ุงูุจุญุซ ูู ุดุงุดุฉ ุงููุจูุนุงุช ุฅูู ุดุงุดุฉ ุงูุฅุชูุงู

## โ ุงูุชุญุฏูุซ ุงูููููุฐ

ุชู ูุณุฎ ูุธุงู ุงูุจุญุซ ุงููุชูุฏู ูู ุดุงุดุฉ ุงููุจูุนุงุช ููุถุนู ูู ุดุงุดุฉ ุงูุฅุชูุงู ูุถูุงู ุชุฌุฑุจุฉ ููุญุฏุฉ ููุญุณูุฉ.

---

## ๐ฏ ุงููุดููุฉ ุงูุณุงุจูุฉ

```
โ ุงูุจุญุซ ูู ุดุงุดุฉ ุงูุฅุชูุงู ูุง ูุนูู ุฌูุฏุงู
โ ูุง ูุธูุฑ ุฌููุน ุงูุฃุตูุงู
โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุฎุชููุฉ ุนู ุงููุจูุนุงุช
โ ููุทู ุชุตููุฉ ูุนูุฏ ููุฎุชูู
```

---

## โ ุงูุญู ุงูููููุฐ

### **ูุณุฎ ุงููุธุงู ุจุงููุงูู ูู ุงููุจูุนุงุช:**

#### 1๏ธโฃ **ุทุฑููุฉ ุฌูุจ ุงูุจูุงูุงุช:**
```typescript
// ูุจู (ูุดููุฉ):
const { data: productsData } = useGetProductsQuery({
  search: productSearchTerm,
  limit: 50,
}, {
  skip: !productSearchTerm,
});

// ุจุนุฏ (ููุณ ุงููุจูุนุงุช):
const { data: productsData } = useGetProductsQuery({ 
  limit: 1000  // ุฌูุจ ุฌููุน ุงูุฃุตูุงู
});
```

#### 2๏ธโฃ **ููุทู ุงูุชุตููุฉ:**
```typescript
// ููุณ ููุทู ุงููุจูุนุงุช ุจุงูุถุจุท
const filteredProducts = productsData?.data?.products?.filter(product => {
  const targetCompanyId = isSystemUser ? selectedCompanyId : userCompanyId;
  
  if (!targetCompanyId) {
    return false;
  }
  
  // ุนุฑุถ ุฃุตูุงู ุงูุดุฑูุฉ ุงูุญุงููุฉ + ุฃุตูุงู ุงูุดุฑูุฉ ุงูุฃู ุฏุงุฆูุงู
  const isFromCurrentCompany = product.createdByCompanyId === targetCompanyId;
  const isFromParentCompany = product.createdByCompanyId === 1;
  
  if (!isFromCurrentCompany && !isFromParentCompany) {
    return false;
  }
  
  // ุงูุจุญุซ ูู ุงูุงุณู ูุงูููุฏ ูุนุงู
  if (productSearchTerm) {
    const matchesName = product.name.toLowerCase().includes(productSearchTerm.toLowerCase());
    const matchesCode = product.sku.toLowerCase().includes(productSearchTerm.toLowerCase());
    return matchesName || matchesCode;
  }
  return true;
}) || [];
```

#### 3๏ธโฃ **ุฏุงูุฉ ุงุฎุชูุงุฑ ุงูุตูู:**
```typescript
// ููุณ ุฏุงูุฉ ุงููุจูุนุงุช ูุน ุชุนุฏูู ุจุณูุท
const handleSelectProductFromDropdown = (product: any) => {
  console.log('๐ฏ ุชู ุงุฎุชูุงุฑ ุตูู ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ:', product);
  
  // ุฅุถุงูุฉ ุจูุฏ ุฌุฏูุฏ
  const newLine = {
    productId: product.id,
    quantity: 1,
    notes: ''
  };
  setLines([...lines, newLine]);
  
  // ุฅุบูุงู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ููุณุญ ุงูุจุญุซ
  setShowProductDropdown(false);
  setProductSearchTerm('');
  
  // ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุตูู ูู ุงูุดุฑูุฉ ุงูุฃู
  const targetCompanyId = isSystemUser ? selectedCompanyId : userCompanyId;
  const isFromParentCompany = product.createdByCompanyId !== targetCompanyId && product.createdByCompanyId === 1;
  const companyType = isFromParentCompany ? '(ูู ูุฎุฒู ุงูุชูุงุฒู)' : '(ูู ุงูุดุฑูุฉ ุงูุญุงููุฉ)';
  
  success(`ุชู ุฅุถุงูุฉ ุงูุตูู: ${product.name} ${companyType}`);
};
```

#### 4๏ธโฃ **ุชุตููู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ:**
```typescript
// ููุณ ุชุตููู ุงููุจูุนุงุช ูุน ุฃููุงู ุงูุฅุชูุงู
{showProductDropdown && productSearchTerm && (
  <div className="absolute top-full left-0 right-0 z-50 mt-1 bg-white border-2 border-red-300 rounded-md shadow-lg max-h-60 overflow-y-auto">
    {filteredProducts.length > 0 ? (
      filteredProducts.slice(0, 10).map((product: any) => {
        const isFromParentCompany = product.createdByCompanyId === 1 && product.createdByCompanyId !== targetCompanyId;
        
        return (
          <button
            key={product.id}
            onClick={() => handleSelectProductFromDropdown(product)}
            className={`w-full px-3 py-2 text-right focus:outline-none border-b border-gray-100 last:border-b-0 transition-colors ${
              isFromParentCompany 
                ? 'hover:bg-orange-50 focus:bg-orange-50' 
                : 'hover:bg-red-50 focus:bg-red-50'  // ุฃุญูุฑ ููุฅุชูุงู
            }`}
          >
            {/* ููุณ ูุญุชูู ุงููุจูุนุงุช */}
          </button>
        );
      })
    ) : (
      <div className="px-3 py-4 text-sm text-gray-500 text-center">
        <Search className="w-8 h-8 mx-auto mb-2 text-gray-300" />
        <p>ูุง ุชูุฌุฏ ุฃุตูุงู ูุทุงุจูุฉ ููุจุญุซ</p>
      </div>
    )}
  </div>
)}
```

---

## ๐จ ุงูููุฒุงุช ุงูููุณูุฎุฉ

### 1๏ธโฃ **ุงูุจุญุซ ุงููุชูุฏู:**
```
โ ุงูุจุญุซ ูู ุงูุงุณู ูุงูููุฏ ูุนุงู
โ ุนุฑุถ ุงููุชุงุฆุฌ ููุฑุงู ุฃุซูุงุก ุงููุชุงุจุฉ
โ ุญุฏ ุฃูุตู 10 ูุชุงุฆุฌ ูู ุงููุงุฆูุฉ
โ ุฅุบูุงู ุชููุงุฆู ุนูุฏ ุงูุงุฎุชูุงุฑ
```

### 2๏ธโฃ **ุนุฑุถ ูุนูููุงุช ุงูุตูู:**
```
โ ุงุณู ุงูุตูู
โ ููุฏ ุงูุตูู (SKU)
โ ุงูุณุนุฑ
โ ุงููููุฉ ุงููุชููุฑุฉ
โ ุชูููุฒ ุฃุตูุงู ุงูุชูุงุฒู ุจู badge ุจุฑุชูุงูู
โ ุชูููุฒ ุงูุฃุตูุงู ุงููุงูุฏุฉ
```

### 3๏ธโฃ **ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:**
```
โ ุฃููุงู ูุชูุงุณูุฉ (ุฃุญูุฑ ููุฅุชูุงู)
โ ุฑุณุงุฆู ุชูุถูุญูุฉ
โ ุนุฏุงุฏ ุงููุชุงุฆุฌ
โ ุฒุฑ ูุณุญ ุงูุจุญุซ
โ ุฑุณุงุฆู ูุฌุงุญ ุนูุฏ ุงูุฅุถุงูุฉ
```

### 4๏ธโฃ **ููุทู ุงูุดุฑูุงุช:**
```
โ ุนุฑุถ ุฃุตูุงู ุงูุดุฑูุฉ ุงููุฎุชุงุฑุฉ
โ ุนุฑุถ ุฃุตูุงู ุงูุชูุงุฒู (ุงูุดุฑูุฉ ุงูุฃู)
โ ุฅุฎูุงุก ุฃุตูุงู ุงูุดุฑูุงุช ุงูุฃุฎุฑู
โ ุชูููุฒ ูุตุฏุฑ ูู ุตูู
```

---

## ๐ง ุงูุชุบููุฑุงุช ุงูุชูููุฉ

### ุงูููู ุงูููุญุฏูุซ:
- โ `/client/src/app/damage-reports/page.tsx`

### ุงูุชุบููุฑุงุช ุงูุฑุฆูุณูุฉ:

#### 1. ุทุฑููุฉ ุฌูุจ ุงูุจูุงูุงุช:
```typescript
// ูู:
search: productSearchTerm || undefined,
limit: 50,
skip: !productSearchTerm,

// ุฅูู:
limit: 1000  // ุฌูุจ ุฌููุน ุงูุฃุตูุงู
```

#### 2. ููุทู ุงูุชุตููุฉ:
```typescript
// ูุณุฎ ูุงูู ูู ุงููุจูุนุงุช
const filteredProducts = productsData?.data?.products?.filter(product => {
  // ููุณ ุงูููุทู ุจุงูุถุจุท
}) || [];
```

#### 3. ุฏุงูุฉ ุงูุงุฎุชูุงุฑ:
```typescript
// ุฅุถุงูุฉ ุฏุงูุฉ ุฌุฏูุฏุฉ
const handleSelectProductFromDropdown = (product: any) => {
  // ููุทู ูุจุณุท ููุฅุชูุงู
};
```

#### 4. ุชุตููู ุงููุงุฆูุฉ:
```typescript
// ููุณ HTML/CSS ูุน ุชุนุฏูู ุงูุฃููุงู
border-red-300  // ุจุฏูุงู ูู border-blue-300
hover:bg-red-50 // ุจุฏูุงู ูู hover:bg-blue-50
```

---

## ๐ ุงูููุงุฑูุฉ

### ูุจู ุงููุณุฎ:
```
โ ุจุญุซ ูุญุฏูุฏ
โ ุชุตููุฉ ูุนูุฏุฉ
โ ุนุฑุถ ุจุณูุท ููุฃุตูุงู
โ ูุง ูุธูุฑ ุฌููุน ุงูุฃุตูุงู
โ ุชุฌุฑุจุฉ ูุฎุชููุฉ ุนู ุงููุจูุนุงุช
```

### ุจุนุฏ ุงููุณุฎ:
```
โ ุจุญุซ ูุชูุฏู ููุฑู
โ ุชุตููุฉ ูุฌุฑุจุฉ ููุฎุชุจุฑุฉ
โ ุนุฑุถ ุบูู ุจุงููุนูููุงุช
โ ูุธูุฑ ุฌููุน ุงูุฃุตูุงู ุงููุชุงุญุฉ
โ ุชุฌุฑุจุฉ ููุญุฏุฉ ูุน ุงููุจูุนุงุช
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู ุงูุฌุฏูุฏ

### ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:
1. **ุงุฎุชุฑ ุดุฑูุฉ ุงูุฅูุงุฑุงุช**
2. **ุงุถุบุท "ุฅูุดุงุก ูุญุถุฑ ุฅุชูุงู"**
3. **ุงุจุญุซ ุนู "ุจูุงุท"**
4. **โ ูุฌุจ ุฃู ุชุธูุฑ:**
   - ุฃุตูุงู ุงูุจูุงุท ูู ุงูุฅูุงุฑุงุช
   - ุฃุตูุงู ุงูุจูุงุท ูู ุงูุชูุงุฒู (ูุน badge ุจุฑุชูุงูู)
   - ูุนูููุงุช ูุงููุฉ ููู ุตูู

### ูุง ูุฌุจ ุฃู ุชุฑุงู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุจูุงุท ุฅูุงุฑุงุชู ุฃุจูุถ                      โ
โ ููุฏ: UAE-001 โข ูุชููุฑ: 150.00           โ
โ                        25.50 ุฏ.ู       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุจูุงุท ุฑุฎุงู [ูุฎุฒู ุงูุชูุงุฒู] ๐           โ
โ ููุฏ: TAQ-001 โข ูุชููุฑ: 80.00            โ
โ                        45.00 ุฏ.ู       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ ุงูููุงุฆุฏ

- ๐ฏ **ุชุฌุฑุจุฉ ููุญุฏุฉ:** ููุณ ุทุฑููุฉ ุงูุจุญุซ ูู ุงููุจูุนุงุช ูุงูุฅุชูุงู
- ๐ **ุจุญุซ ุฃูุถู:** ูุนูู ูู ุฌููุน ุงูุฃุตูุงู ุงููุชุงุญุฉ
- ๐ก **ุณูููุฉ ุงูุงุณุชุฎุฏุงู:** ูุงุฌูุฉ ูุฃูููุฉ ูููุณุชุฎุฏููู
- ๐ **ุฃุฏุงุก ูุญุณู:** ููุทู ูุฌุฑุจ ููุฎุชุจุฑ
- ๐จ **ุชุตููู ูุชูุงุณู:** ุฃููุงู ูุชุฎุทูุท ููุญุฏ

---

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

ุงููุธุงู ุงูุขู ูุณุชุฎุฏู ููุณ ูุธุงู ุงูุจุญุซ ุงููุชูุฏู ูู ุงููุจูุนุงุช:
- โ ุจุญุซ ุณุฑูุน ูุฏููู
- โ ุนุฑุถ ุดุงูู ูููุนูููุงุช
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ
- โ ููุทู ูุฌุฑุจ ููุฎุชุจุฑ

**๐ ุงูุจุญุซ ุงูุขู ูุนูู ุจููุณ ุฌูุฏุฉ ุดุงุดุฉ ุงููุจูุนุงุช!**
