# ุชุญุฏูุซ ูุธุงู ุงูุฅูุตุงูุงุช ุงูุนุงูุฉ - ุฏุนู ุงูููุฑุฏูู ูุงูุนููุงุก ูุงูููุธููู

## ๐ ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุญุฏูุซ ูุธุงู ุงูุฅูุตุงูุงุช ุงูุนุงูุฉ ููุฏุนู ุงูุชุนุงูู ูุน:
- โ ุฌูุงุช ุงูุงุชุตุงู ุงูุนุงูุฉ (Financial Contacts) - ููุง ูุงู ุณุงุจูุงู
- โ ุงูุนููุงุก (Customers) - ุฌุฏูุฏ
- โ ุงูููุฑุฏูู (Suppliers) - ุฌุฏูุฏ
- โ ุงูููุธููู (Employees) - ุฌุฏูุฏ

## ๐ ุงูุชุบููุฑุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช (Schema)

#### ุชุนุฏูู ุฌุฏูู `GeneralReceipt`
```sql
-- ุงูุญููู ุงูุฌุฏูุฏุฉ
customerId    INTEGER?  -- ูุนุฑู ุงูุนููู (ุงุฎุชูุงุฑู)
supplierId    INTEGER?  -- ูุนุฑู ุงูููุฑุฏ (ุงุฎุชูุงุฑู)
employeeId    INTEGER?  -- ูุนุฑู ุงูููุธู (ุงุฎุชูุงุฑู)
contactId     INTEGER?  -- ุฃุตุจุญ ุงุฎุชูุงุฑู ุจุฏูุงู ูู ุฅุฌุจุงุฑู

-- ุงูู indexes ุงูุฌุฏูุฏุฉ
INDEX on customerId
INDEX on supplierId
INDEX on employeeId

-- ุงูุนูุงูุงุช (Foreign Keys)
- GeneralReceipt -> Customer (customerId)
- GeneralReceipt -> Supplier (supplierId)
- GeneralReceipt -> Employee (employeeId)
- GeneralReceipt -> FinancialContact (contactId) - ุฃุตุจุญุช ุงุฎุชูุงุฑูุฉ
```

#### ุชุญุฏูุซ ุงูู Enums
```typescript
enum CustomerReferenceType {
  SALE
  PAYMENT
  ADJUSTMENT
  RETURN
  GENERAL_RECEIPT  // โ ุฌุฏูุฏ
}

enum SupplierReferenceType {
  PURCHASE
  PAYMENT
  ADJUSTMENT
  RETURN
  GENERAL_RECEIPT  // โ ุฌุฏูุฏ
}
```

### 2. Backend (Server)

#### `generalReceipt.service.ts`
- โ ุฏุนู 4 ุฃููุงุน ูู ุงูุฌูุงุช ูู ุงูุฅูุตุงู ุงููุงุญุฏ
- โ ุงูุชุญูู ูู ูุฌูุฏ ุฌูุฉ ูุงุญุฏุฉ ููุท (ูุง ูููู ุชุญุฏูุฏ ุฃูุซุฑ ูู ุฌูุฉ)
- โ ุชุณุฌูู ุงูุญุฑูุงุช ุชููุงุฆูุงู ูู:
  - `FinancialContactAccount` ููุฌูุงุช ุงูุนุงูุฉ
  - `CustomerAccount` ููุนููุงุก
  - `SupplierAccount` ููููุฑุฏูู
  - ุชุณุฌูู ูู ุงูู console ููููุธููู (ูููู ุชุทููุฑู ูุงุญูุงู ููุดู ุญุณุงุจ ุฎุงุต)

#### ููุทู ุงููุญุงุณุจุฉ
```typescript
// ููุนููุงุก (Customers)
DEPOSIT (ูุจุถ ูู ุงูุนููู)    โ CREDIT (ูู - ูุณุฏุฏ ุฏูู)
WITHDRAWAL (ุตุฑู ููุนููู)    โ DEBIT (ุนููู - ูุณุชุฏูู)

// ููููุฑุฏูู (Suppliers)
DEPOSIT (ูุจุถ ูู ุงูููุฑุฏ)     โ DEBIT (ูู - ูุณุฏุฏ ุฏูู ููุง)
WITHDRAWAL (ุตุฑู ููููุฑุฏ)    โ CREDIT (ุนููู - ูุณุฏุฏ ูู ุฏูู)

// ูุฌูุงุช ุงูุงุชุตุงู ุงูุนุงูุฉ
DEPOSIT (ูุจุถ ููู)          โ ูุฒูุฏ ุฑุตูุฏู (ุฏุงุฆู ููุง)
WITHDRAWAL (ุตุฑู ูู)       โ ูููุต ุฑุตูุฏู (ูุฏูู ููุง)

// ููููุธููู (Employees)
DEPOSIT (ูุจุถ ูู ุงูููุธู)   โ ูุชู ุงูุชุณุฌูู (ูููู ุชุทููุฑู ูุงุญูุงู)
WITHDRAWAL (ุตุฑู ููููุธู)   โ ูุชู ุงูุชุณุฌูู (ุณููุ ููุงูุขุชุ ุฅูุฎ)
```

### 3. Frontend (Client)

#### ุตูุญุฉ ุงูุฅูุตุงูุงุช ุงูุนุงูุฉ (`general-receipts/page.tsx`)
- โ ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุงุฎุชูุงุฑ ููุน ุงูุฌูุฉ (ุฌูุฉ ุงุชุตุงู / ุนููู / ููุฑุฏ / ููุธู)
- โ **ูุธุงู ุจุญุซ ูุชุทูุฑ** ูุซู ุดุงุดุฉ ุงููุจูุนุงุช:
  - ุจุญุซ ุฏููุงูููู ุจุงูุงุณู ุฃู ุงููุงุชู
  - ูุงุฆูุฉ ููุณุฏูุฉ ุจุงูุงูุชุฑุงุญุงุช
  - ุฅุบูุงู ุชููุงุฆู ุนูุฏ ุงูููุฑ ุฎุงุฑุฌูุง
  - ูุคุดุฑ ุชุญููู
  - ุฑุณุงูุฉ ุชุฃููุฏ ุนูุฏ ุงูุงุฎุชูุงุฑ
- โ ุนุฑุถ ููุน ุงูุฌูุฉ ูู ุฌุฏูู ุงูุฅูุตุงูุงุช
- โ ุฏุนู ุงูุจุญุซ ูุงูููุชุฑุฉ ุญุณุจ ููุน ุงูุฌูุฉ
- โ ุญุฏ ุฃูุตู ููููุฑุฏูู/ุงูุนููุงุก: 1000 (ุจุฏูุงู ูู 50000)

#### API Types (`generalReceiptApi.ts`)
```typescript
interface GeneralReceipt {
  contactId?: number;
  customerId?: number;   // ุฌุฏูุฏ
  supplierId?: number;   // ุฌุฏูุฏ
  employeeId?: number;   // ุฌุฏูุฏ
  contact?: FinancialContact;
  customer?: {           // ุฌุฏูุฏ
    id: number;
    name: string;
    phone?: string;
  };
  supplier?: {           // ุฌุฏูุฏ
    id: number;
    name: string;
    phone?: string;
  };
  employee?: {           // ุฌุฏูุฏ
    id: number;
    name: string;
    phone?: string;
  };
}
```

## ๐ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### 1. ุฅูุตุงู ูุจุถ ูู ุนููู
```
ููุน ุงูุฅูุตุงู: DEPOSIT (ูุจุถ)
ููุน ุงูุฌูุฉ: ุนููู
ุงููุชูุฌุฉ: ูุชู ุชุณุฌูู ุฏูุนุฉ ูู ูุดู ุญุณุงุจ ุงูุนููู (CREDIT - ูู)
```

### 2. ุฅูุตุงู ุตุฑู ูููุฑุฏ
```
ููุน ุงูุฅูุตุงู: WITHDRAWAL (ุตุฑู)
ููุน ุงูุฌูุฉ: ููุฑุฏ
ุงููุชูุฌุฉ: ูุชู ุชุณุฌูู ุฏูุนุฉ ูู ูุดู ุญุณุงุจ ุงูููุฑุฏ (CREDIT - ุนููู/ูุฏูุน ูู)
```

### 3. ุฅูุตุงู ูุจุถ ูู ุฌูุฉ ุงุชุตุงู ุนุงูุฉ
```
ููุน ุงูุฅูุตุงู: DEPOSIT (ูุจุถ)
ููุน ุงูุฌูุฉ: ุฌูุฉ ุงุชุตุงู
ุงููุชูุฌุฉ: ูุชู ุชุณุฌูู ูู ูุดู ุญุณุงุจ ุฌูุฉ ุงูุงุชุตุงู ุงููุงููุฉ
```

## ๐ ุงูููุงุฆุฏ

1. **ุชุชุจุน ุดุงูู**: ุฌููุน ุงูุนูููุงุช ุงููุงููุฉ ูุน ุงูุนููุงุก ูุงูููุฑุฏูู ุชุธูุฑ ูู ูุดูู ุญุณุงุจุงุชูู
2. **ูุฑููุฉ**: ูููู ุชุณุฌูู ุฅูุตุงูุงุช ุฎุงุฑุฌูุฉ ูุฃู ููุน ูู ุงูุฌูุงุช
3. **ุฏูุฉ ูุญุงุณุจูุฉ**: ูุชู ุชุณุฌูู ุงูุญุฑูุงุช ุชููุงุฆูุงู ูู ุงูุฃูุธูุฉ ุงูููุงุณุจุฉ
4. **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**: ูุงุฌูุฉ ุจุณูุทุฉ ูุงุฎุชูุงุฑ ููุน ุงูุฌูุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ูุง ูููู ุชุญุฏูุฏ ุฃูุซุฑ ูู ุฌูุฉ ูุงุญุฏุฉ**: ุงูุฅูุตุงู ูุฌุจ ุฃู ูููู ูุฌูุฉ ูุงุญุฏุฉ ููุท
2. **ูุฌุจ ุชุญุฏูุฏ ุฌูุฉ**: ูุง ูููู ุฅูุดุงุก ุฅูุตุงู ุจุฏูู ุชุญุฏูุฏ ุฌูุฉ
3. **ุงูุฎุฒููุฉ ุฅูุฒุงููุฉ**: ูุฌุจ ุชุญุฏูุฏ ุงูุฎุฒููุฉ ุงููุณุชูุฏูุฉ
4. **ุงูุชุณุฌูู ุงูุชููุงุฆู**: ูุชู ุชุณุฌูู ุงูุญุฑูุงุช ุชููุงุฆูุงู ูู ูุดูู ุงูุญุณุงุจุงุช

## ๐ ุงูุชุดุบูู

ุชู ุชุทุจูู ุงูุชุบููุฑุงุช ุชููุงุฆูุงู ุนุจุฑ migration:
```bash
npx prisma migrate dev --name add_customers_suppliers_to_general_receipts
```

## โ ุงูุงุฎุชุจุงุฑ

ูููู ุงุฎุชุจุงุฑ ุงูููุฒุฉ ูู ุฎูุงู:
1. ุงูุฐูุงุจ ุฅูู ุตูุญุฉ ุงูุฅูุตุงูุงุช ุงูุนุงูุฉ
2. ุฅูุดุงุก ุฅูุตุงู ูุจุถ/ุตุฑู
3. ุงุฎุชูุงุฑ ููุน ุงูุฌูุฉ (ุนููู/ููุฑุฏ/ุฌูุฉ ุงุชุตุงู)
4. **ุงูุจุญุซ ุนู ุงูุฌูุฉ**: ูุชุงุจุฉ ุงูุงุณู ุฃู ุงููุงุชู ูู ุญูู ุงูุจุญุซ
5. ุงุฎุชูุงุฑ ุงูุฌูุฉ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
6. ุงูุชุญูู ูู ุฑุณุงูุฉ ุงูุชุฃููุฏ ุงูุฎุถุฑุงุก
7. ุฅููุงู ุจููุฉ ุงูุจูุงูุงุช ูุญูุธ ุงูุฅูุตุงู
8. ุงูุชุญูู ูู ุธููุฑ ุงูุญุฑูุฉ ูู ูุดู ุงูุญุณุงุจ ุงูููุงุณุจ

## ๐ ุงูุชุญุฏูุซ ุงูุฃุฎูุฑ

### ุชุญุณููุงุช UX (4 ููุงูุฑ 2026 - 12:00)
- โ **ูุธุงู ุจุญุซ ุฏููุงูููู** ูุซู ุดุงุดุฉ ุงููุจูุนุงุช ุชูุงูุงู
- โ ุฅุตูุงุญ ุฎุทุฃ limit ุงูููุฑุฏูู (ุชูููู ูู 50000 ุฅูู 1000)
- โ **ุฌูุจ ุฌููุน ุงูุนููุงุก** (ุญุฏ ุฃูุตู: 100,000 ุนููู)
- โ ููุงุฆู ููุณุฏูุฉ ุชูุงุนููุฉ ูุน ุงูุจุญุซ ุงูููุฑู
- โ ูุคุดุฑุงุช ุชุญููู ูุฑุณุงุฆู ุชุฃููุฏ
- โ ุฅุบูุงู ุชููุงุฆู ููููุงุฆู ุนูุฏ ุงูููุฑ ุฎุงุฑุฌูุง

### ุญุฏูุฏ ุงูุจุญุซ
- **ุงูุนููุงุก**: 100,000 (ูุบุทู ุฌููุน ุงูุนููุงุก ูู ุงููุธุงู)
- **ุงูููุฑุฏูู**: 1,000 (ุงูุญุฏ ุงูุฃูุตู ุงููุณููุญ ุจู ูู validation)
- **ุงูููุธููู**: ุบูุฑ ูุญุฏูุฏ (ุงูููุธููู ุงููุดุทูู ููุท)
- **ุฌูุงุช ุงูุงุชุตุงู**: ุบูุฑ ูุญุฏูุฏ (ูุชู ุฌูุจูุง ูููุง)

### ุฅุถุงูุฉ ุฏุนู ุงูููุธููู (4 ููุงูุฑ 2026 - 12:10)
- โ **ุฑุจุท ุงูููุธููู ุจุงูุฅูุตุงูุงุช ุงูุฎุงุฑุฌูุฉ**
- โ ูุธุงู ุจุญุซ ููููุธููู ุจููุณ ุฃุณููุจ ุงูุนููุงุก ูุงูููุฑุฏูู
- โ ุนุฑุถ ุงููุณูู ุงููุธููู ูู ูุชุงุฆุฌ ุงูุจุญุซ
- โ ููู ูููุฒ ููููุธููู (ุจููุณุฌู/purple)
- โ ุญุงูุงุช ุงุณุชุฎุฏุงู: ุณููุ ููุงูุขุชุ ุงุณุชุฑุฌุงุน ูุจุงูุบ

---

ุชุงุฑูุฎ ุงูุชุญุฏูุซ: 4 ููุงูุฑ 2026 (12:10 ุธูุฑุงู)

